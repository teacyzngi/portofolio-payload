{"version":3,"sources":["../../../src/fields/config/sanitize.spec.ts"],"sourcesContent":["import type { Config } from '../../config/types.js'\nimport type {\n  ArrayField,\n  Block,\n  BlocksField,\n  CheckboxField,\n  Field,\n  NumberField,\n  TextField,\n} from './types.js'\n\nimport {\n  DuplicateFieldName,\n  InvalidFieldName,\n  InvalidFieldRelationship,\n  MissingFieldType,\n} from '../../errors/index.js'\nimport { sanitizeFields } from './sanitize.js'\nimport { CollectionConfig } from '../../index.js'\n\ndescribe('sanitizeFields', () => {\n  const config = {} as Config\n  const collectionConfig = {} as CollectionConfig\n\n  it('should throw on missing type field', async () => {\n    const fields: Field[] = [\n      // @ts-expect-error\n      {\n        name: 'Some Collection',\n        label: 'some-collection',\n      },\n    ]\n\n    await expect(async () => {\n      await sanitizeFields({\n        config,\n        collectionConfig,\n        fields,\n        validRelationships: [],\n      })\n    }).rejects.toThrow(MissingFieldType)\n  })\n\n  it('should throw on invalid field name', async () => {\n    const fields: Field[] = [\n      {\n        name: 'some.collection',\n        type: 'text',\n        label: 'some.collection',\n      },\n    ]\n\n    await expect(async () => {\n      await sanitizeFields({\n        config,\n        collectionConfig,\n        fields,\n        validRelationships: [],\n      })\n    }).rejects.toThrow(InvalidFieldName)\n  })\n\n  it('should throw on duplicate field name', async () => {\n    const fields: Field[] = [\n      {\n        name: 'someField',\n        type: 'text',\n        label: 'someField',\n      },\n      {\n        name: 'someField',\n        type: 'text',\n        label: 'someField',\n      },\n    ]\n\n    await expect(async () => {\n      await sanitizeFields({\n        config,\n        collectionConfig,\n        fields,\n        validRelationships: [],\n      })\n    }).rejects.toThrow(DuplicateFieldName)\n  })\n\n  it('should throw on duplicate block slug', async () => {\n    const fields: Field[] = [\n      {\n        name: 'blocks',\n        type: 'blocks',\n        blocks: [\n          {\n            slug: 'block',\n            fields: [\n              {\n                name: 'blockField',\n                type: 'text',\n              },\n            ],\n          },\n          {\n            slug: 'block',\n            fields: [\n              {\n                name: 'blockField',\n                type: 'text',\n              },\n            ],\n          },\n        ],\n      },\n    ]\n\n    await expect(async () => {\n      await sanitizeFields({\n        config,\n        collectionConfig,\n        fields,\n        validRelationships: [],\n      })\n    }).rejects.toThrow(DuplicateFieldName)\n  })\n\n  describe('auto-labeling', () => {\n    it('should populate label if missing', async () => {\n      const fields: Field[] = [\n        {\n          name: 'someField',\n          type: 'text',\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as TextField\n\n      expect(sanitizedField.name).toStrictEqual('someField')\n      expect(sanitizedField.label).toStrictEqual('Some Field')\n      expect(sanitizedField.type).toStrictEqual('text')\n    })\n\n    it('should allow auto-label override', async () => {\n      const fields: Field[] = [\n        {\n          name: 'someField',\n          type: 'text',\n          label: 'Do not label',\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as TextField\n\n      expect(sanitizedField.name).toStrictEqual('someField')\n      expect(sanitizedField.label).toStrictEqual('Do not label')\n      expect(sanitizedField.type).toStrictEqual('text')\n    })\n\n    describe('opt-out', () => {\n      it('should allow label opt-out', async () => {\n        const fields: Field[] = [\n          {\n            name: 'someField',\n            type: 'text',\n            label: false,\n          },\n        ]\n\n        const sanitizedField = (\n          await sanitizeFields({\n            config,\n            collectionConfig,\n            fields,\n            validRelationships: [],\n          })\n        )[0] as TextField\n\n        expect(sanitizedField.name).toStrictEqual('someField')\n        expect(sanitizedField.label).toStrictEqual(false)\n        expect(sanitizedField.type).toStrictEqual('text')\n      })\n\n      it('should allow label opt-out for arrays', async () => {\n        const arrayField: ArrayField = {\n          name: 'items',\n          type: 'array',\n          fields: [\n            {\n              name: 'itemName',\n              type: 'text',\n            },\n          ],\n          label: false,\n        }\n\n        const sanitizedField = (\n          await sanitizeFields({\n            config,\n            collectionConfig,\n            fields: [arrayField],\n            validRelationships: [],\n          })\n        )[0] as ArrayField\n\n        expect(sanitizedField.name).toStrictEqual('items')\n        expect(sanitizedField.label).toStrictEqual(false)\n        expect(sanitizedField.type).toStrictEqual('array')\n        expect(sanitizedField.labels).toBeUndefined()\n      })\n\n      it('should allow label opt-out for blocks', async () => {\n        const fields: Field[] = [\n          {\n            name: 'noLabelBlock',\n            type: 'blocks',\n            blocks: [\n              {\n                slug: 'number',\n                fields: [\n                  {\n                    name: 'testNumber',\n                    type: 'number',\n                  },\n                ],\n              },\n            ],\n            label: false,\n          },\n        ]\n\n        const sanitizedField = (\n          await sanitizeFields({\n            config,\n            collectionConfig,\n            fields,\n            validRelationships: [],\n          })\n        )[0] as BlocksField\n\n        expect(sanitizedField.name).toStrictEqual('noLabelBlock')\n        expect(sanitizedField.label).toStrictEqual(false)\n        expect(sanitizedField.type).toStrictEqual('blocks')\n        expect(sanitizedField.labels).toBeUndefined()\n      })\n    })\n\n    it('should label arrays with plural and singular', async () => {\n      const fields: Field[] = [\n        {\n          name: 'items',\n          type: 'array',\n          fields: [\n            {\n              name: 'itemName',\n              type: 'text',\n            },\n          ],\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as ArrayField\n\n      expect(sanitizedField.name).toStrictEqual('items')\n      expect(sanitizedField.label).toStrictEqual('Items')\n      expect(sanitizedField.type).toStrictEqual('array')\n      expect(sanitizedField.labels).toMatchObject({ plural: 'Items', singular: 'Item' })\n    })\n\n    it('should label blocks with plural and singular', async () => {\n      const fields: Field[] = [\n        {\n          name: 'specialBlock',\n          type: 'blocks',\n          blocks: [\n            {\n              slug: 'number',\n              fields: [{ name: 'testNumber', type: 'number' }],\n            },\n          ],\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as BlocksField\n\n      expect(sanitizedField.name).toStrictEqual('specialBlock')\n      expect(sanitizedField.label).toStrictEqual('Special Block')\n      expect(sanitizedField.type).toStrictEqual('blocks')\n      expect(sanitizedField.labels).toMatchObject({\n        plural: 'Special Blocks',\n        singular: 'Special Block',\n      })\n\n      expect((sanitizedField.blocks[0].fields[0] as NumberField).label).toStrictEqual('Test Number')\n    })\n  })\n\n  describe('relationships', () => {\n    it('should not throw on valid relationship', async () => {\n      const validRelationships = ['some-collection']\n      const fields: Field[] = [\n        {\n          name: 'My Relationship',\n          type: 'relationship',\n          label: 'my-relationship',\n          relationTo: 'some-collection',\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).not.toThrow()\n    })\n\n    it('should not throw on valid relationship - multiple', async () => {\n      const validRelationships = ['some-collection', 'another-collection']\n      const fields: Field[] = [\n        {\n          name: 'My Relationship',\n          type: 'relationship',\n          label: 'my-relationship',\n          relationTo: ['some-collection', 'another-collection'],\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).not.toThrow()\n    })\n\n    it('should not throw on valid relationship inside blocks', async () => {\n      const validRelationships = ['some-collection']\n      const relationshipBlock: Block = {\n        slug: 'relationshipBlock',\n        fields: [\n          {\n            name: 'My Relationship',\n            type: 'relationship',\n            label: 'my-relationship',\n            relationTo: 'some-collection',\n          },\n        ],\n      }\n\n      const fields: Field[] = [\n        {\n          name: 'layout',\n          type: 'blocks',\n          blocks: [relationshipBlock],\n          label: 'Layout Blocks',\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).not.toThrow()\n    })\n\n    it('should throw on invalid relationship', async () => {\n      const validRelationships = ['some-collection']\n      const fields: Field[] = [\n        {\n          name: 'My Relationship',\n          type: 'relationship',\n          label: 'my-relationship',\n          relationTo: 'not-valid',\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).rejects.toThrow(InvalidFieldRelationship)\n    })\n\n    it('should throw on invalid relationship - multiple', async () => {\n      const validRelationships = ['some-collection', 'another-collection']\n      const fields: Field[] = [\n        {\n          name: 'My Relationship',\n          type: 'relationship',\n          label: 'my-relationship',\n          relationTo: ['some-collection', 'not-valid'],\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).rejects.toThrow(InvalidFieldRelationship)\n    })\n\n    it('should throw on invalid relationship inside blocks', async () => {\n      const validRelationships = ['some-collection']\n      const relationshipBlock: Block = {\n        slug: 'relationshipBlock',\n        fields: [\n          {\n            name: 'My Relationship',\n            type: 'relationship',\n            label: 'my-relationship',\n            relationTo: 'not-valid',\n          },\n        ],\n      }\n\n      const fields: Field[] = [\n        {\n          name: 'layout',\n          type: 'blocks',\n          blocks: [relationshipBlock],\n          label: 'Layout Blocks',\n        },\n      ]\n\n      await expect(async () => {\n        await sanitizeFields({ config, collectionConfig, fields, validRelationships })\n      }).rejects.toThrow(InvalidFieldRelationship)\n    })\n\n    it('should defaultValue of checkbox to false if required and undefined', async () => {\n      const fields: Field[] = [\n        {\n          name: 'My Checkbox',\n          type: 'checkbox',\n          required: true,\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as CheckboxField\n\n      expect(sanitizedField.defaultValue).toStrictEqual(false)\n    })\n\n    it('should return empty field array if no fields', async () => {\n      const sanitizedFields = await sanitizeFields({\n        config,\n        collectionConfig,\n        fields: [],\n        validRelationships: [],\n      })\n\n      expect(sanitizedFields).toStrictEqual([])\n    })\n  })\n  describe('blocks', () => {\n    it('should maintain admin.blockName true after sanitization', async () => {\n      const fields: Field[] = [\n        {\n          name: 'noLabelBlock',\n          type: 'blocks',\n          blocks: [\n            {\n              slug: 'number',\n              admin: {\n                disableBlockName: true,\n              },\n              fields: [\n                {\n                  name: 'testNumber',\n                  type: 'number',\n                },\n              ],\n            },\n          ],\n          label: false,\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as BlocksField\n\n      const sanitizedBlock = sanitizedField.blocks[0]\n\n      expect(sanitizedBlock.admin?.disableBlockName).toStrictEqual(true)\n    })\n    it('should default admin.disableBlockName to true after sanitization', async () => {\n      const fields: Field[] = [\n        {\n          name: 'noLabelBlock',\n          type: 'blocks',\n          blocks: [\n            {\n              slug: 'number',\n              fields: [\n                {\n                  name: 'testNumber',\n                  type: 'number',\n                },\n              ],\n            },\n          ],\n          label: false,\n        },\n      ]\n\n      const sanitizedField = (\n        await sanitizeFields({\n          config,\n          collectionConfig,\n          fields,\n          validRelationships: [],\n        })\n      )[0] as BlocksField\n\n      const sanitizedBlock = sanitizedField.blocks[0]\n\n      expect(sanitizedBlock.admin?.disableBlockName).toStrictEqual(undefined)\n    })\n  })\n})\n"],"names":["DuplicateFieldName","InvalidFieldName","InvalidFieldRelationship","MissingFieldType","sanitizeFields","describe","config","collectionConfig","it","fields","name","label","expect","validRelationships","rejects","toThrow","type","blocks","slug","sanitizedField","toStrictEqual","arrayField","labels","toBeUndefined","toMatchObject","plural","singular","relationTo","not","relationshipBlock","required","defaultValue","sanitizedFields","admin","disableBlockName","sanitizedBlock","undefined"],"mappings":"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"}