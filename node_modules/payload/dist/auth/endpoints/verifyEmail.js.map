{"version":3,"sources":["../../../src/auth/endpoints/verifyEmail.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { verifyEmailOperation } from '../operations/verifyEmail.js'\n\nexport const verifyEmailHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req, { disableSanitize: true })\n  const { t } = req\n  await verifyEmailOperation({\n    collection,\n    req,\n    token: id,\n  })\n\n  return Response.json(\n    {\n      message: t('authentication:accountVerified'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","verifyEmailOperation","verifyEmailHandler","req","id","collection","disableSanitize","t","token","Response","json","message","headers","Headers","OK"],"mappings":"AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,oBAAoB,QAAQ,+BAA8B;AAEnE,OAAO,MAAMC,qBAAqC,OAAOC;IACvD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,GAAGN,2BAA2BI,KAAK;QAAEG,iBAAiB;IAAK;IACnF,MAAM,EAAEC,CAAC,EAAE,GAAGJ;IACd,MAAMF,qBAAqB;QACzBI;QACAF;QACAK,OAAOJ;IACT;IAEA,OAAOK,SAASC,IAAI,CAClB;QACEC,SAASJ,EAAE;IACb,GACA;QACEK,SAASZ,gBAAgB;YACvBY,SAAS,IAAIC;YACbV;QACF;QACAN,QAAQC,WAAWgB,EAAE;IACvB;AAEJ,EAAC"}