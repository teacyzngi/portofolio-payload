{"version":3,"sources":["../../src/utilities/appendNonTrashedFilter.ts"],"sourcesContent":["import type { Where } from '../types/index.js'\n\nexport const appendNonTrashedFilter = ({\n  deletedAtPath = 'deletedAt',\n  enableTrash,\n  trash,\n  where,\n}: {\n  deletedAtPath?: string\n  enableTrash: boolean\n  trash?: boolean\n  where: Where\n}): Where => {\n  if (!enableTrash || trash) {\n    return where\n  }\n\n  const notTrashedFilter = {\n    [deletedAtPath]: { exists: false },\n  }\n\n  if (where?.and) {\n    return {\n      ...where,\n      and: [...where.and, notTrashedFilter],\n    }\n  }\n\n  return {\n    and: [notTrashedFilter, ...(where ? [where] : [])],\n  }\n}\n"],"names":["appendNonTrashedFilter","deletedAtPath","enableTrash","trash","where","notTrashedFilter","exists","and"],"mappings":"AAEA,OAAO,MAAMA,yBAAyB,CAAC,EACrCC,gBAAgB,WAAW,EAC3BC,WAAW,EACXC,KAAK,EACLC,KAAK,EAMN;IACC,IAAI,CAACF,eAAeC,OAAO;QACzB,OAAOC;IACT;IAEA,MAAMC,mBAAmB;QACvB,CAACJ,cAAc,EAAE;YAAEK,QAAQ;QAAM;IACnC;IAEA,IAAIF,OAAOG,KAAK;QACd,OAAO;YACL,GAAGH,KAAK;YACRG,KAAK;mBAAIH,MAAMG,GAAG;gBAAEF;aAAiB;QACvC;IACF;IAEA,OAAO;QACLE,KAAK;YAACF;eAAsBD,QAAQ;gBAACA;aAAM,GAAG,EAAE;SAAE;IACpD;AACF,EAAC"}