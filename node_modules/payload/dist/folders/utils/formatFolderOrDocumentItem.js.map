{"version":3,"sources":["../../../src/folders/utils/formatFolderOrDocumentItem.ts"],"sourcesContent":["import type { CollectionSlug, Document } from '../../index.js'\nimport type { FolderOrDocument } from '../types.js'\n\nimport { isImage } from '../../uploads/isImage.js'\nimport { getBestFitFromSizes } from '../../utilities/getBestFitFromSizes.js'\n\ntype Args = {\n  folderFieldName: string\n  isUpload: boolean\n  relationTo: CollectionSlug\n  useAsTitle?: string\n  value: Document\n}\nexport function formatFolderOrDocumentItem({\n  folderFieldName,\n  isUpload,\n  relationTo,\n  useAsTitle,\n  value,\n}: Args): FolderOrDocument {\n  const itemValue: FolderOrDocument['value'] = {\n    id: value?.id,\n    _folderOrDocumentTitle: String((useAsTitle && value?.[useAsTitle]) || value['id']),\n    createdAt: value?.createdAt,\n    folderID: value?.[folderFieldName],\n    folderType: value?.folderType || [],\n    updatedAt: value?.updatedAt,\n  }\n\n  if (isUpload) {\n    itemValue.filename = value.filename\n    itemValue.mimeType = value.mimeType\n    itemValue.url =\n      value.thumbnailURL ||\n      (isImage(value.mimeType)\n        ? getBestFitFromSizes({\n            sizes: value.sizes,\n            targetSizeMax: 520,\n            targetSizeMin: 300,\n            url: value.url,\n            width: value.width,\n          })\n        : undefined)\n  }\n\n  return {\n    itemKey: `${relationTo}-${value.id}`,\n    relationTo,\n    value: itemValue,\n  }\n}\n"],"names":["isImage","getBestFitFromSizes","formatFolderOrDocumentItem","folderFieldName","isUpload","relationTo","useAsTitle","value","itemValue","id","_folderOrDocumentTitle","String","createdAt","folderID","folderType","updatedAt","filename","mimeType","url","thumbnailURL","sizes","targetSizeMax","targetSizeMin","width","undefined","itemKey"],"mappings":"AAGA,SAASA,OAAO,QAAQ,2BAA0B;AAClD,SAASC,mBAAmB,QAAQ,yCAAwC;AAS5E,OAAO,SAASC,2BAA2B,EACzCC,eAAe,EACfC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,KAAK,EACA;IACL,MAAMC,YAAuC;QAC3CC,IAAIF,OAAOE;QACXC,wBAAwBC,OAAO,AAACL,cAAcC,OAAO,CAACD,WAAW,IAAKC,KAAK,CAAC,KAAK;QACjFK,WAAWL,OAAOK;QAClBC,UAAUN,OAAO,CAACJ,gBAAgB;QAClCW,YAAYP,OAAOO,cAAc,EAAE;QACnCC,WAAWR,OAAOQ;IACpB;IAEA,IAAIX,UAAU;QACZI,UAAUQ,QAAQ,GAAGT,MAAMS,QAAQ;QACnCR,UAAUS,QAAQ,GAAGV,MAAMU,QAAQ;QACnCT,UAAUU,GAAG,GACXX,MAAMY,YAAY,IACjBnB,CAAAA,QAAQO,MAAMU,QAAQ,IACnBhB,oBAAoB;YAClBmB,OAAOb,MAAMa,KAAK;YAClBC,eAAe;YACfC,eAAe;YACfJ,KAAKX,MAAMW,GAAG;YACdK,OAAOhB,MAAMgB,KAAK;QACpB,KACAC,SAAQ;IAChB;IAEA,OAAO;QACLC,SAAS,GAAGpB,WAAW,CAAC,EAAEE,MAAME,EAAE,EAAE;QACpCJ;QACAE,OAAOC;IACT;AACF"}