{"version":3,"sources":["../../../../src/queues/operations/handleSchedules/defaultBeforeSchedule.ts"],"sourcesContent":["import type { BeforeScheduleFn } from '../../config/types/index.js'\n\nimport { countRunnableOrActiveJobsForQueue } from './countRunnableOrActiveJobsForQueue.js'\n\nexport const defaultBeforeSchedule: BeforeScheduleFn = async ({ queueable, req }) => {\n  // All tasks in that queue that are either currently processing or can be run\n  const runnableOrActiveJobsForQueue = await countRunnableOrActiveJobsForQueue({\n    onlyScheduled: true,\n    queue: queueable.scheduleConfig.queue,\n    req,\n    taskSlug: queueable.taskConfig?.slug,\n    workflowSlug: queueable.workflowConfig?.slug,\n  })\n\n  return {\n    input: {},\n    shouldSchedule: runnableOrActiveJobsForQueue === 0,\n    waitUntil: queueable.waitUntil,\n  }\n}\n"],"names":["countRunnableOrActiveJobsForQueue","defaultBeforeSchedule","queueable","req","runnableOrActiveJobsForQueue","onlyScheduled","queue","scheduleConfig","taskSlug","taskConfig","slug","workflowSlug","workflowConfig","input","shouldSchedule","waitUntil"],"mappings":"AAEA,SAASA,iCAAiC,QAAQ,yCAAwC;AAE1F,OAAO,MAAMC,wBAA0C,OAAO,EAAEC,SAAS,EAAEC,GAAG,EAAE;IAC9E,6EAA6E;IAC7E,MAAMC,+BAA+B,MAAMJ,kCAAkC;QAC3EK,eAAe;QACfC,OAAOJ,UAAUK,cAAc,CAACD,KAAK;QACrCH;QACAK,UAAUN,UAAUO,UAAU,EAAEC;QAChCC,cAAcT,UAAUU,cAAc,EAAEF;IAC1C;IAEA,OAAO;QACLG,OAAO,CAAC;QACRC,gBAAgBV,iCAAiC;QACjDW,WAAWb,UAAUa,SAAS;IAChC;AACF,EAAC"}