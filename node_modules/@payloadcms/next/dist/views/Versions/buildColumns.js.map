{"version":3,"file":"buildColumns.js","names":["SortColumn","React","AutosaveCell","CreatedAtCell","IDCell","buildVersionColumns","collectionConfig","CreatedAtCellOverride","currentlyPublishedVersion","docID","docs","globalConfig","i18n","t","isTrashed","latestDraftVersion","entityConfig","CreatedAtCellComponent","columns","accessor","active","field","name","type","Heading","_jsx","Label","renderedCells","map","doc","i","collectionSlug","slug","globalSlug","rowData","id","updatedAt","disable","versions","drafts","autosave","push"],"sources":["../../../src/views/Versions/buildColumns.tsx"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type {\n  Column,\n  PaginatedDocs,\n  SanitizedCollectionConfig,\n  SanitizedConfig,\n  SanitizedGlobalConfig,\n  TypeWithVersion,\n} from 'payload'\n\nimport { SortColumn } from '@payloadcms/ui'\nimport React from 'react'\n\nimport { AutosaveCell } from './cells/AutosaveCell/index.js'\nimport { CreatedAtCell, type CreatedAtCellProps } from './cells/CreatedAt/index.js'\nimport { IDCell } from './cells/ID/index.js'\n\nexport const buildVersionColumns = ({\n  collectionConfig,\n  CreatedAtCellOverride,\n  currentlyPublishedVersion,\n  docID,\n  docs,\n  globalConfig,\n  i18n: { t },\n  isTrashed,\n  latestDraftVersion,\n}: {\n  collectionConfig?: SanitizedCollectionConfig\n  CreatedAtCellOverride?: React.ComponentType<CreatedAtCellProps>\n  currentlyPublishedVersion?: {\n    id: number | string\n    updatedAt: string\n  }\n  docID?: number | string\n  docs: PaginatedDocs<TypeWithVersion<any>>['docs']\n  globalConfig?: SanitizedGlobalConfig\n  i18n: I18n\n  isTrashed?: boolean\n  latestDraftVersion?: {\n    id: number | string\n    updatedAt: string\n  }\n}): Column[] => {\n  const entityConfig = collectionConfig || globalConfig\n\n  const CreatedAtCellComponent = CreatedAtCellOverride ?? CreatedAtCell\n\n  const columns: Column[] = [\n    {\n      accessor: 'updatedAt',\n      active: true,\n      field: {\n        name: '',\n        type: 'date',\n      },\n      Heading: <SortColumn Label={t('general:updatedAt')} name=\"updatedAt\" />,\n      renderedCells: docs.map((doc, i) => {\n        return (\n          <CreatedAtCellComponent\n            collectionSlug={collectionConfig?.slug}\n            docID={docID}\n            globalSlug={globalConfig?.slug}\n            isTrashed={isTrashed}\n            key={i}\n            rowData={{\n              id: doc.id,\n              updatedAt: doc.updatedAt,\n            }}\n          />\n        )\n      }),\n    },\n    {\n      accessor: 'id',\n      active: true,\n      field: {\n        name: '',\n        type: 'text',\n      },\n      Heading: <SortColumn disable Label={t('version:versionID')} name=\"id\" />,\n      renderedCells: docs.map((doc, i) => {\n        return <IDCell id={doc.id} key={i} />\n      }),\n    },\n  ]\n\n  if (\n    entityConfig?.versions?.drafts ||\n    (entityConfig?.versions?.drafts && entityConfig.versions.drafts?.autosave)\n  ) {\n    columns.push({\n      accessor: '_status',\n      active: true,\n      field: {\n        name: '',\n        type: 'checkbox',\n      },\n      Heading: <SortColumn disable Label={t('version:status')} name=\"status\" />,\n      renderedCells: docs.map((doc, i) => {\n        return (\n          <AutosaveCell\n            currentlyPublishedVersion={currentlyPublishedVersion}\n            key={i}\n            latestDraftVersion={latestDraftVersion}\n            rowData={doc}\n          />\n        )\n      }),\n    })\n  }\n\n  return columns\n}\n"],"mappings":";AAUA,SAASA,UAAU,QAAQ;AAC3B,OAAOC,KAAA,MAAW;AAElB,SAASC,YAAY,QAAQ;AAC7B,SAASC,aAAa,QAAiC;AACvD,SAASC,MAAM,QAAQ;AAEvB,OAAO,MAAMC,mBAAA,GAAsBA,CAAC;EAClCC,gBAAgB;EAChBC,qBAAqB;EACrBC,yBAAyB;EACzBC,KAAK;EACLC,IAAI;EACJC,YAAY;EACZC,IAAA,EAAM;IAAEC;EAAC,CAAE;EACXC,SAAS;EACTC;AAAkB,CAiBnB;EACC,MAAMC,YAAA,GAAeV,gBAAA,IAAoBK,YAAA;EAEzC,MAAMM,sBAAA,GAAyBV,qBAAA,IAAyBJ,aAAA;EAExD,MAAMe,OAAA,GAAoB,CACxB;IACEC,QAAA,EAAU;IACVC,MAAA,EAAQ;IACRC,KAAA,EAAO;MACLC,IAAA,EAAM;MACNC,IAAA,EAAM;IACR;IACAC,OAAA,eAASC,IAAA,CAACzB,UAAA;MAAW0B,KAAA,EAAOb,CAAA,CAAE;MAAsBS,IAAA,EAAK;;IACzDK,aAAA,EAAejB,IAAA,CAAKkB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;MAC5B,oBACEL,IAAA,CAACR,sBAAA;QACCc,cAAA,EAAgBzB,gBAAA,EAAkB0B,IAAA;QAClCvB,KAAA,EAAOA,KAAA;QACPwB,UAAA,EAAYtB,YAAA,EAAcqB,IAAA;QAC1BlB,SAAA,EAAWA,SAAA;QAEXoB,OAAA,EAAS;UACPC,EAAA,EAAIN,GAAA,CAAIM,EAAE;UACVC,SAAA,EAAWP,GAAA,CAAIO;QACjB;SAJKN,CAAA;IAOX;EACF,GACA;IACEX,QAAA,EAAU;IACVC,MAAA,EAAQ;IACRC,KAAA,EAAO;MACLC,IAAA,EAAM;MACNC,IAAA,EAAM;IACR;IACAC,OAAA,eAASC,IAAA,CAACzB,UAAA;MAAWqC,OAAO;MAACX,KAAA,EAAOb,CAAA,CAAE;MAAsBS,IAAA,EAAK;;IACjEK,aAAA,EAAejB,IAAA,CAAKkB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;MAC5B,oBAAOL,IAAA,CAACrB,MAAA;QAAO+B,EAAA,EAAIN,GAAA,CAAIM;SAASL,CAAA;IAClC;EACF,EACD;EAED,IACEd,YAAA,EAAcsB,QAAA,EAAUC,MAAA,IACvBvB,YAAA,EAAcsB,QAAA,EAAUC,MAAA,IAAUvB,YAAA,CAAasB,QAAQ,CAACC,MAAM,EAAEC,QAAA,EACjE;IACAtB,OAAA,CAAQuB,IAAI,CAAC;MACXtB,QAAA,EAAU;MACVC,MAAA,EAAQ;MACRC,KAAA,EAAO;QACLC,IAAA,EAAM;QACNC,IAAA,EAAM;MACR;MACAC,OAAA,eAASC,IAAA,CAACzB,UAAA;QAAWqC,OAAO;QAACX,KAAA,EAAOb,CAAA,CAAE;QAAmBS,IAAA,EAAK;;MAC9DK,aAAA,EAAejB,IAAA,CAAKkB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;QAC5B,oBACEL,IAAA,CAACvB,YAAA;UACCM,yBAAA,EAA2BA,yBAAA;UAE3BO,kBAAA,EAAoBA,kBAAA;UACpBmB,OAAA,EAASL;WAFJC,CAAA;MAKX;IACF;EACF;EAEA,OAAOZ,OAAA;AACT","ignoreList":[]}