{"version":3,"file":"index.js","names":["c","_c","FieldDiffContainer","getHTMLDiffComponents","useTranslation","React","baseClass","formatValue","value","tokenizeByCharacter","String","JSON","stringify","undefined","Text","t0","$","comparisonValue","valueFrom","field","locale","nestingLevel","versionValue","valueTo","i18n","placeholder","t1","label","formattedValueFrom","formattedValueTo","length","renderedValueFrom","renderedValueTo","From","To","fromHTML","toHTML","_jsx","className"],"sources":["../../../../../../src/views/Version/RenderFieldsToDiff/fields/Text/index.tsx"],"sourcesContent":["'use client'\nimport type { TextFieldDiffClientComponent } from 'payload'\n\nimport { FieldDiffContainer, getHTMLDiffComponents, useTranslation } from '@payloadcms/ui'\n\nimport './index.scss'\n\nimport React from 'react'\n\nconst baseClass = 'text-diff'\n\nfunction formatValue(value: unknown): {\n  tokenizeByCharacter: boolean\n  value: string\n} {\n  if (typeof value === 'string') {\n    return { tokenizeByCharacter: true, value }\n  }\n  if (typeof value === 'number') {\n    return {\n      tokenizeByCharacter: true,\n      value: String(value),\n    }\n  }\n  if (typeof value === 'boolean') {\n    return {\n      tokenizeByCharacter: false,\n      value: String(value),\n    }\n  }\n\n  if (value && typeof value === 'object') {\n    return {\n      tokenizeByCharacter: false,\n      value: `<pre>${JSON.stringify(value, null, 2)}</pre>`,\n    }\n  }\n\n  return {\n    tokenizeByCharacter: true,\n    value: undefined,\n  }\n}\n\nexport const Text: TextFieldDiffClientComponent = ({\n  comparisonValue: valueFrom,\n  field,\n  locale,\n  nestingLevel,\n  versionValue: valueTo,\n}) => {\n  const { i18n } = useTranslation()\n\n  let placeholder = ''\n\n  if (valueTo == valueFrom) {\n    placeholder = `<span class=\"html-diff-no-value\"><span>`\n  }\n\n  const formattedValueFrom = formatValue(valueFrom)\n  const formattedValueTo = formatValue(valueTo)\n\n  let tokenizeByCharacter = true\n  if (formattedValueFrom.value?.length) {\n    tokenizeByCharacter = formattedValueFrom.tokenizeByCharacter\n  } else if (formattedValueTo.value?.length) {\n    tokenizeByCharacter = formattedValueTo.tokenizeByCharacter\n  }\n\n  const renderedValueFrom = formattedValueFrom.value ?? placeholder\n  const renderedValueTo: string = formattedValueTo.value ?? placeholder\n\n  const { From, To } = getHTMLDiffComponents({\n    fromHTML: '<p>' + renderedValueFrom + '</p>',\n    toHTML: '<p>' + renderedValueTo + '</p>',\n    tokenizeByCharacter,\n  })\n\n  return (\n    <FieldDiffContainer\n      className={baseClass}\n      From={From}\n      i18n={i18n}\n      label={{\n        label: field.label,\n        locale,\n      }}\n      nestingLevel={nestingLevel}\n      To={To}\n    />\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AAGA,SAASC,kBAAkB,EAAEC,qBAAqB,EAAEC,cAAc,QAAQ;AAI1E,OAAOC,KAAA,MAAW;AAElB,MAAMC,SAAA,GAAY;AAElB,SAASC,YAAYC,KAAc;EAIjC,IAAI,OAAOA,KAAA,KAAU,UAAU;IAC7B,OAAO;MAAEC,mBAAA,EAAqB;MAAMD;IAAM;EAC5C;EACA,IAAI,OAAOA,KAAA,KAAU,UAAU;IAC7B,OAAO;MACLC,mBAAA,EAAqB;MACrBD,KAAA,EAAOE,MAAA,CAAOF,KAAA;IAChB;EACF;EACA,IAAI,OAAOA,KAAA,KAAU,WAAW;IAC9B,OAAO;MACLC,mBAAA,EAAqB;MACrBD,KAAA,EAAOE,MAAA,CAAOF,KAAA;IAChB;EACF;EAEA,IAAIA,KAAA,IAAS,OAAOA,KAAA,KAAU,UAAU;IACtC,OAAO;MACLC,mBAAA,EAAqB;MACrBD,KAAA,EAAO,QAAQG,IAAA,CAAKC,SAAS,CAACJ,KAAA,EAAO,MAAM;IAC7C;EACF;EAEA,OAAO;IACLC,mBAAA,EAAqB;IACrBD,KAAA,EAAOK;EACT;AACF;AAEA,OAAO,MAAMC,IAAA,GAAqCC,EAAA;EAAA,MAAAC,CAAA,GAAAf,EAAA;EAAC;IAAAgB,eAAA,EAAAC,SAAA;IAAAC,KAAA;IAAAC,MAAA;IAAAC,YAAA;IAAAC,YAAA,EAAAC;EAAA,IAAAR,EAMlD;EACC;IAAAS;EAAA,IAAiBpB,cAAA;EAEjB,IAAAqB,WAAA,GAAkB;EAAA,IAEdF,OAAA,IAAWL,SAAA;IACbO,WAAA,CAAAA,CAAA,CAAcA,2CAAyC;EAAvD;EAAA,IAAAC,EAAA;EAAA,IAAAV,CAAA,QAAAG,KAAA,CAAAQ,KAAA,IAAAX,CAAA,QAAAQ,IAAA,IAAAR,CAAA,QAAAI,MAAA,IAAAJ,CAAA,QAAAK,YAAA,IAAAL,CAAA,QAAAS,WAAA,IAAAT,CAAA,QAAAE,SAAA,IAAAF,CAAA,QAAAO,OAAA;IAGF,MAAAK,kBAAA,GAA2BrB,WAAA,CAAYW,SAAA;IACvC,MAAAW,gBAAA,GAAyBtB,WAAA,CAAYgB,OAAA;IAErC,IAAAd,mBAAA;IAA0B,IACtBmB,kBAAA,CAAApB,KAAA,EAAAsB,MAAA;MACFrB,mBAAA,CAAAA,CAAA,CAAsBmB,kBAAA,CAAAnB,mBAAA;IAAtB;MAAA,IACSoB,gBAAA,CAAArB,KAAA,EAAAsB,MAAA;QACTrB,mBAAA,CAAAA,CAAA,CAAsBoB,gBAAA,CAAApB,mBAAA;MAAtB;IAAA;IAGF,MAAAsB,iBAAA,GAA0BH,kBAAA,CAAApB,KAAA,IAA4BiB,WAAA;IACtD,MAAAO,eAAA,GAAgCH,gBAAA,CAAArB,KAAA,IAA0BiB,WAAA;IAE1D;MAAAQ,IAAA;MAAAC;IAAA,IAAqB/B,qBAAA;MAAAgC,QAAA,EACT,QAAQJ,iBAAA,GAAoB;MAAAK,MAAA,EAC9B,QAAQJ,eAAA,GAAkB;MAAAvB;IAAA,CAEpC;IAGEiB,EAAA,GAAAW,IAAA,CAAAnC,kBAAA;MAAAoC,SAAA,EAAAhC,SAAA;MAAA2B,IAAA;MAAAT,IAAA;MAAAG,KAAA;QAAAA,KAAA,EAKWR,KAAA,CAAAQ,KAAA;QAAAP;MAAA;MAAAC,YAAA;MAAAa;IAAA,C;;;;;;;;;;;;SALXR,E;CAYJ","ignoreList":[]}