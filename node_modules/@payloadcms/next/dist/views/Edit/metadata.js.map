{"version":3,"file":"metadata.js","names":["getTranslation","generateMetadata","generateEditViewMetadata","collectionConfig","config","globalConfig","i18n","isEditing","isReadOnly","view","t","entityLabel","labels","singular","label","verb","metaToUse","admin","meta","description","keywords","title","ogToUse","openGraph","components","views","edit","serverURL"],"sources":["../../../src/views/Edit/metadata.ts"],"sourcesContent":["import type { Metadata } from 'next'\nimport type { MetaConfig } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\n\nimport type { GenerateEditViewMetadata } from '../Document/getMetaBySegment.js'\n\nimport { generateMetadata } from '../../utilities/meta.js'\n\n/**\n * @todo Remove the type assertion. This is currently required because of how the `Metadata` type from `next` consumes the `URL` type.\n */\nexport const generateEditViewMetadata: GenerateEditViewMetadata = async ({\n  collectionConfig,\n  config,\n  globalConfig,\n  i18n,\n  isEditing,\n  isReadOnly = false,\n  view = 'default',\n}): Promise<Metadata> => {\n  const { t } = i18n\n\n  const entityLabel = collectionConfig\n    ? getTranslation(collectionConfig.labels.singular, i18n)\n    : globalConfig\n      ? getTranslation(globalConfig.label, i18n)\n      : ''\n\n  const verb = isReadOnly\n    ? t('general:viewing')\n    : isEditing\n      ? t('general:editing')\n      : t('general:creating')\n\n  const metaToUse: MetaConfig = {\n    ...(config.admin.meta || {}),\n    description: `${verb} - ${entityLabel}`,\n    keywords: `${entityLabel}, Payload, CMS`,\n    title: `${verb} - ${entityLabel}`,\n  }\n\n  const ogToUse: MetaConfig['openGraph'] = {\n    title: `${isEditing ? t('general:edit') : t('general:edit')} - ${entityLabel}`,\n    ...(config.admin.meta.openGraph || {}),\n    ...((collectionConfig\n      ? {\n          ...(collectionConfig?.admin.meta?.openGraph || {}),\n          ...(collectionConfig?.admin?.components?.views?.edit?.[view]?.meta?.openGraph || {}),\n        }\n      : {}) as MetaConfig['openGraph']),\n    ...((globalConfig\n      ? {\n          ...(globalConfig?.admin.meta?.openGraph || {}),\n          ...(globalConfig?.admin?.components?.views?.edit?.[view]?.meta?.openGraph || {}),\n        }\n      : {}) as MetaConfig['openGraph']),\n  }\n\n  return generateMetadata({\n    ...metaToUse,\n    openGraph: ogToUse,\n    ...((collectionConfig\n      ? {\n          ...(collectionConfig?.admin.meta || {}),\n          ...(collectionConfig?.admin?.components?.views?.edit?.[view]?.meta || {}),\n        }\n      : {}) as MetaConfig),\n    ...((globalConfig\n      ? {\n          ...(globalConfig?.admin.meta || {}),\n          ...(globalConfig?.admin?.components?.views?.edit?.[view]?.meta || {}),\n        }\n      : {}) as MetaConfig),\n    serverURL: config.serverURL,\n  })\n}\n"],"mappings":"AAGA,SAASA,cAAc,QAAQ;AAI/B,SAASC,gBAAgB,QAAQ;AAEjC;;;AAGA,OAAO,MAAMC,wBAAA,GAAqD,MAAAA,CAAO;EACvEC,gBAAgB;EAChBC,MAAM;EACNC,YAAY;EACZC,IAAI;EACJC,SAAS;EACTC,UAAA,GAAa,KAAK;EAClBC,IAAA,GAAO;AAAS,CACjB;EACC,MAAM;IAAEC;EAAC,CAAE,GAAGJ,IAAA;EAEd,MAAMK,WAAA,GAAcR,gBAAA,GAChBH,cAAA,CAAeG,gBAAA,CAAiBS,MAAM,CAACC,QAAQ,EAAEP,IAAA,IACjDD,YAAA,GACEL,cAAA,CAAeK,YAAA,CAAaS,KAAK,EAAER,IAAA,IACnC;EAEN,MAAMS,IAAA,GAAOP,UAAA,GACTE,CAAA,CAAE,qBACFH,SAAA,GACEG,CAAA,CAAE,qBACFA,CAAA,CAAE;EAER,MAAMM,SAAA,GAAwB;IAC5B,IAAIZ,MAAA,CAAOa,KAAK,CAACC,IAAI,IAAI,CAAC,CAAC;IAC3BC,WAAA,EAAa,GAAGJ,IAAA,MAAUJ,WAAA,EAAa;IACvCS,QAAA,EAAU,GAAGT,WAAA,gBAA2B;IACxCU,KAAA,EAAO,GAAGN,IAAA,MAAUJ,WAAA;EACtB;EAEA,MAAMW,OAAA,GAAmC;IACvCD,KAAA,EAAO,GAAGd,SAAA,GAAYG,CAAA,CAAE,kBAAkBA,CAAA,CAAE,qBAAqBC,WAAA,EAAa;IAC9E,IAAIP,MAAA,CAAOa,KAAK,CAACC,IAAI,CAACK,SAAS,IAAI,CAAC,CAAC;IACrC,IAAKpB,gBAAA,GACD;MACE,IAAIA,gBAAA,EAAkBc,KAAA,CAAMC,IAAA,EAAMK,SAAA,IAAa,CAAC,CAAC;MACjD,IAAIpB,gBAAA,EAAkBc,KAAA,EAAOO,UAAA,EAAYC,KAAA,EAAOC,IAAA,GAAOjB,IAAA,CAAK,EAAES,IAAA,EAAMK,SAAA,IAAa,CAAC,CAAC;IACrF,IACA,CAAC,CAAC;IACN,IAAKlB,YAAA,GACD;MACE,IAAIA,YAAA,EAAcY,KAAA,CAAMC,IAAA,EAAMK,SAAA,IAAa,CAAC,CAAC;MAC7C,IAAIlB,YAAA,EAAcY,KAAA,EAAOO,UAAA,EAAYC,KAAA,EAAOC,IAAA,GAAOjB,IAAA,CAAK,EAAES,IAAA,EAAMK,SAAA,IAAa,CAAC,CAAC;IACjF,IACA,CAAC,CAAC;EACR;EAEA,OAAOtB,gBAAA,CAAiB;IACtB,GAAGe,SAAS;IACZO,SAAA,EAAWD,OAAA;IACX,IAAKnB,gBAAA,GACD;MACE,IAAIA,gBAAA,EAAkBc,KAAA,CAAMC,IAAA,IAAQ,CAAC,CAAC;MACtC,IAAIf,gBAAA,EAAkBc,KAAA,EAAOO,UAAA,EAAYC,KAAA,EAAOC,IAAA,GAAOjB,IAAA,CAAK,EAAES,IAAA,IAAQ,CAAC,CAAC;IAC1E,IACA,CAAC,CAAC;IACN,IAAKb,YAAA,GACD;MACE,IAAIA,YAAA,EAAcY,KAAA,CAAMC,IAAA,IAAQ,CAAC,CAAC;MAClC,IAAIb,YAAA,EAAcY,KAAA,EAAOO,UAAA,EAAYC,KAAA,EAAOC,IAAA,GAAOjB,IAAA,CAAK,EAAES,IAAA,IAAQ,CAAC,CAAC;IACtE,IACA,CAAC,CAAC;IACNS,SAAA,EAAWvB,MAAA,CAAOuB;EACpB;AACF","ignoreList":[]}