{"version":3,"file":"index.js","names":["$findMatchingParent","$isElementNode","INDENT_CONTENT_COMMAND","OUTDENT_CONTENT_COMMAND","IndentDecreaseIcon","IndentIncreaseIcon","createClientFeature","IndentPlugin","toolbarIndentGroupWithItems","toolbarGroups","disabledNodes","ChildComponent","isActive","isEnabled","selection","nodes","getNodes","isOutdentable","node","isIndentable","getIndent","some","Boolean","key","label","i18n","t","onSelect","editor","dispatchCommand","undefined","order","isIndentableAndNotDisabled","includes","getType","IndentFeatureClient","props","plugins","Component","position","sanitizedClientFeatureProps","toolbarFixed","groups","toolbarInline","canIndent"],"sources":["../../../../src/features/indent/client/index.tsx"],"sourcesContent":["'use client'\n\nimport type { ElementNode, LexicalNode } from 'lexical'\n\nimport { $findMatchingParent } from '@lexical/utils'\nimport { $isElementNode, INDENT_CONTENT_COMMAND, OUTDENT_CONTENT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { IndentDecreaseIcon } from '../../../lexical/ui/icons/IndentDecrease/index.js'\nimport { IndentIncreaseIcon } from '../../../lexical/ui/icons/IndentIncrease/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { type IndentFeatureProps } from '../server/index.js'\nimport { IndentPlugin } from './IndentPlugin.js'\nimport { toolbarIndentGroupWithItems } from './toolbarIndentGroup.js'\n\nconst toolbarGroups = ({ disabledNodes }: IndentFeatureProps): ToolbarGroup[] => [\n  toolbarIndentGroupWithItems([\n    {\n      ChildComponent: IndentDecreaseIcon,\n      isActive: () => false,\n      isEnabled: ({ selection }) => {\n        const nodes = selection?.getNodes() ?? []\n\n        const isOutdentable = (node: LexicalNode) => {\n          return isIndentable(node) && node.getIndent() > 0\n        }\n\n        return nodes.some((node) => {\n          return isOutdentable(node) || Boolean($findMatchingParent(node, isOutdentable))\n        })\n      },\n      key: 'indentDecrease',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:indent:decreaseLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(OUTDENT_CONTENT_COMMAND, undefined)\n      },\n      order: 1,\n    },\n    {\n      ChildComponent: IndentIncreaseIcon,\n      isActive: () => false,\n      isEnabled: ({ selection }) => {\n        const nodes = selection?.getNodes() ?? []\n\n        const isIndentableAndNotDisabled = (node: LexicalNode) => {\n          return isIndentable(node) && !(disabledNodes ?? []).includes(node.getType())\n        }\n\n        return nodes.some((node) => {\n          return (\n            isIndentableAndNotDisabled(node) ||\n            Boolean($findMatchingParent(node, isIndentableAndNotDisabled))\n          )\n        })\n      },\n      key: 'indentIncrease',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:indent:increaseLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INDENT_CONTENT_COMMAND, undefined)\n      },\n      order: 2,\n    },\n  ]),\n]\n\nexport const IndentFeatureClient = createClientFeature<IndentFeatureProps>(({ props }) => {\n  const disabledNodes = props.disabledNodes ?? []\n  return {\n    plugins: [\n      {\n        Component: IndentPlugin,\n        position: 'normal',\n      },\n    ],\n    sanitizedClientFeatureProps: props,\n    toolbarFixed: {\n      groups: toolbarGroups({ disabledNodes }),\n    },\n    toolbarInline: {\n      groups: toolbarGroups({ disabledNodes }),\n    },\n  }\n})\n\nconst isIndentable = (node: LexicalNode): node is ElementNode =>\n  $isElementNode(node) && node.canIndent()\n"],"mappings":"AAAA;;AAIA,SAASA,mBAAmB,QAAQ;AACpC,SAASC,cAAc,EAAEC,sBAAsB,EAAEC,uBAAuB,QAAQ;AAIhF,SAASC,kBAAkB,QAAQ;AACnC,SAASC,kBAAkB,QAAQ;AACnC,SAASC,mBAAmB,QAAQ;AAEpC,SAASC,YAAY,QAAQ;AAC7B,SAASC,2BAA2B,QAAQ;AAE5C,MAAMC,aAAA,GAAgBA,CAAC;EAAEC;AAAa,CAAsB,KAAqB,CAC/EF,2BAAA,CAA4B,CAC1B;EACEG,cAAA,EAAgBP,kBAAA;EAChBQ,QAAA,EAAUA,CAAA,KAAM;EAChBC,SAAA,EAAWA,CAAC;IAAEC;EAAS,CAAE;IACvB,MAAMC,KAAA,GAAQD,SAAA,EAAWE,QAAA,MAAc,EAAE;IAEzC,MAAMC,aAAA,GAAiBC,IAAA;MACrB,OAAOC,YAAA,CAAaD,IAAA,KAASA,IAAA,CAAKE,SAAS,KAAK;IAClD;IAEA,OAAOL,KAAA,CAAMM,IAAI,CAAEH,IAAA;MACjB,OAAOD,aAAA,CAAcC,IAAA,KAASI,OAAA,CAAQtB,mBAAA,CAAoBkB,IAAA,EAAMD,aAAA;IAClE;EACF;EACAM,GAAA,EAAK;EACLC,KAAA,EAAOA,CAAC;IAAEC;EAAI,CAAE;IACd,OAAOA,IAAA,CAAKC,CAAC,CAAC;EAChB;EACAC,QAAA,EAAUA,CAAC;IAAEC;EAAM,CAAE;IACnBA,MAAA,CAAOC,eAAe,CAAC1B,uBAAA,EAAyB2B,SAAA;EAClD;EACAC,KAAA,EAAO;AACT,GACA;EACEpB,cAAA,EAAgBN,kBAAA;EAChBO,QAAA,EAAUA,CAAA,KAAM;EAChBC,SAAA,EAAWA,CAAC;IAAEC;EAAS,CAAE;IACvB,MAAMC,KAAA,GAAQD,SAAA,EAAWE,QAAA,MAAc,EAAE;IAEzC,MAAMgB,0BAAA,GAA8Bd,IAAA;MAClC,OAAOC,YAAA,CAAaD,IAAA,KAAS,CAAC,CAACR,aAAA,IAAiB,EAAE,EAAEuB,QAAQ,CAACf,IAAA,CAAKgB,OAAO;IAC3E;IAEA,OAAOnB,KAAA,CAAMM,IAAI,CAAEH,IAAA;MACjB,OACEc,0BAAA,CAA2Bd,IAAA,KAC3BI,OAAA,CAAQtB,mBAAA,CAAoBkB,IAAA,EAAMc,0BAAA;IAEtC;EACF;EACAT,GAAA,EAAK;EACLC,KAAA,EAAOA,CAAC;IAAEC;EAAI,CAAE;IACd,OAAOA,IAAA,CAAKC,CAAC,CAAC;EAChB;EACAC,QAAA,EAAUA,CAAC;IAAEC;EAAM,CAAE;IACnBA,MAAA,CAAOC,eAAe,CAAC3B,sBAAA,EAAwB4B,SAAA;EACjD;EACAC,KAAA,EAAO;AACT,EACD,EACF;AAED,OAAO,MAAMI,mBAAA,GAAsB7B,mBAAA,CAAwC,CAAC;EAAE8B;AAAK,CAAE;EACnF,MAAM1B,aAAA,GAAgB0B,KAAA,CAAM1B,aAAa,IAAI,EAAE;EAC/C,OAAO;IACL2B,OAAA,EAAS,CACP;MACEC,SAAA,EAAW/B,YAAA;MACXgC,QAAA,EAAU;IACZ,EACD;IACDC,2BAAA,EAA6BJ,KAAA;IAC7BK,YAAA,EAAc;MACZC,MAAA,EAAQjC,aAAA,CAAc;QAAEC;MAAc;IACxC;IACAiC,aAAA,EAAe;MACbD,MAAA,EAAQjC,aAAA,CAAc;QAAEC;MAAc;IACxC;EACF;AACF;AAEA,MAAMS,YAAA,GAAgBD,IAAA,IACpBjB,cAAA,CAAeiB,IAAA,KAASA,IAAA,CAAK0B,SAAS","ignoreList":[]}