{"version":3,"file":"graphQLPopulationPromise.js","names":["recursivelyPopulateFieldsForGraphQL","linkPopulationPromiseHOC","props","context","currentDepth","depth","draft","editorPopulationPromises","field","fieldPromises","findMany","flattenLocales","node","overrideAccess","parentIsLocalized","populationPromises","req","showHiddenFields","fields","length","Array","isArray","data","localized","siblingDoc"],"sources":["../../../../src/features/link/server/graphQLPopulationPromise.ts"],"sourcesContent":["import type { PopulationPromise } from '../../typesServer.js'\nimport type { SerializedLinkNode } from '../nodes/types.js'\nimport type { LinkFeatureServerProps } from './index.js'\n\nimport { recursivelyPopulateFieldsForGraphQL } from '../../../populateGraphQL/recursivelyPopulateFieldsForGraphQL.js'\n\nexport const linkPopulationPromiseHOC = (\n  props: LinkFeatureServerProps,\n): PopulationPromise<SerializedLinkNode> => {\n  return ({\n    context,\n    currentDepth,\n    depth,\n    draft,\n    editorPopulationPromises,\n    field,\n    fieldPromises,\n    findMany,\n    flattenLocales,\n    node,\n    overrideAccess,\n    parentIsLocalized,\n    populationPromises,\n    req,\n    showHiddenFields,\n  }) => {\n    if (!props.fields?.length) {\n      return\n    }\n\n    /**\n     * Should populate all fields, including the doc field (for internal links), as it's treated like a normal field\n     */\n    if (Array.isArray(props.fields)) {\n      recursivelyPopulateFieldsForGraphQL({\n        context,\n        currentDepth,\n        data: node.fields,\n        depth,\n        draft,\n        editorPopulationPromises,\n        fieldPromises,\n        fields: props.fields,\n        findMany,\n        flattenLocales,\n        overrideAccess,\n        parentIsLocalized: parentIsLocalized || field.localized || false,\n        populationPromises,\n        req,\n        showHiddenFields,\n        siblingDoc: node.fields,\n      })\n    }\n  }\n}\n"],"mappings":"AAIA,SAASA,mCAAmC,QAAQ;AAEpD,OAAO,MAAMC,wBAAA,GACXC,KAAA;EAEA,OAAO,CAAC;IACNC,OAAO;IACPC,YAAY;IACZC,KAAK;IACLC,KAAK;IACLC,wBAAwB;IACxBC,KAAK;IACLC,aAAa;IACbC,QAAQ;IACRC,cAAc;IACdC,IAAI;IACJC,cAAc;IACdC,iBAAiB;IACjBC,kBAAkB;IAClBC,GAAG;IACHC;EAAgB,CACjB;IACC,IAAI,CAACf,KAAA,CAAMgB,MAAM,EAAEC,MAAA,EAAQ;MACzB;IACF;IAEA;;;IAGA,IAAIC,KAAA,CAAMC,OAAO,CAACnB,KAAA,CAAMgB,MAAM,GAAG;MAC/BlB,mCAAA,CAAoC;QAClCG,OAAA;QACAC,YAAA;QACAkB,IAAA,EAAMV,IAAA,CAAKM,MAAM;QACjBb,KAAA;QACAC,KAAA;QACAC,wBAAA;QACAE,aAAA;QACAS,MAAA,EAAQhB,KAAA,CAAMgB,MAAM;QACpBR,QAAA;QACAC,cAAA;QACAE,cAAA;QACAC,iBAAA,EAAmBA,iBAAA,IAAqBN,KAAA,CAAMe,SAAS,IAAI;QAC3DR,kBAAA;QACAC,GAAA;QACAC,gBAAA;QACAO,UAAA,EAAYZ,IAAA,CAAKM;MACnB;IACF;EACF;AACF","ignoreList":[]}