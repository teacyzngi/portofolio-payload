"use client";import{a as h}from"./chunk-DBWINSQN.js";import{a as f}from"./chunk-F26IQ5RE.js";import{jsx as o,jsxs as c}from"react/jsx-runtime";import{useLexicalComposerContext as S}from"@lexical/react/LexicalComposerContext.js";import{useLexicalEditable as j}from"@lexical/react/useLexicalEditable";import{getTranslation as B}from"@payloadcms/translations";import{Button as b,useConfig as L,usePayloadAPI as A,useTranslation as I}from"@payloadcms/ui";import{$getNodeByKey as P}from"lexical";import k,{useCallback as H,useReducer as K,useRef as M,useState as O}from"react";var e="lexical-relationship",_={depth:0},X=g=>{let{data:{relationTo:R,value:l},nodeKey:a}=g;if(typeof l=="object")throw new Error("Relationship value should be a string or number. The Lexical Relationship component should not receive the populated value object.");let v=M(null),[s]=S(),i=j(),{config:{routes:{api:C},serverURL:x},getEntityConfig:N}=L(),[t]=O(()=>N({collectionSlug:R})),{i18n:$,t:n}=I(),[u,w]=K(r=>r+1,0),[{data:m},{setParams:d}]=A(`${x}${C}/${t.slug}/${l}`,{initialParams:_}),{closeDocumentDrawer:p,DocumentDrawer:D,DocumentDrawerToggler:E}=f({id:l,collectionSlug:t.slug}),T=H(()=>{s.update(()=>{P(a)?.remove()})},[s,a]),y=k.useCallback(()=>{d({..._,cacheBust:u}),p(),w()},[u,d,p]);return c("div",{className:e,contentEditable:!1,ref:v,children:[c("div",{className:`${e}__wrap`,children:[o("p",{className:`${e}__label`,children:n("fields:labelRelationship",{label:t.labels?.singular?B(t.labels?.singular,$):t.slug})}),o(E,{className:`${e}__doc-drawer-toggler`,children:o("p",{className:`${e}__title`,children:m?m[t?.admin?.useAsTitle||"id"]:l})})]}),i&&c("div",{className:`${e}__actions`,children:[o(b,{buttonStyle:"icon-label",className:`${e}__swapButton`,disabled:!i,el:"button",icon:"swap",onClick:()=>{a&&s.dispatchCommand(h,{replace:{nodeKey:a}})},round:!0,tooltip:n("fields:swapRelationship")}),o(b,{buttonStyle:"icon-label",className:`${e}__removeButton`,disabled:!i,icon:"x",onClick:r=>{r.preventDefault(),T()},round:!0,tooltip:n("fields:removeRelationship")})]}),!!l&&o(D,{onSave:y})]})};export{X as RelationshipComponent};
//# sourceMappingURL=RelationshipComponent-JXQOFHXF.js.map
