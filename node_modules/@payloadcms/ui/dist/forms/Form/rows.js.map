{"version":3,"file":"rows.js","names":["separateRows","path","fields","remainingFields","rows","Object","entries","reduce","incomingRows","fieldPath","field","newRows","indexOf","rowIndex","replace","split","String","flattenRows","row","i","subFields","subPath","subField"],"sources":["../../../src/forms/Form/rows.ts"],"sourcesContent":["'use client'\nimport type { FormState } from 'payload'\n\ntype Result = {\n  remainingFields: FormState\n  rows: FormState[]\n}\n\nexport const separateRows = (path: string, fields: FormState): Result => {\n  const remainingFields: FormState = {}\n\n  const rows = Object.entries(fields).reduce((incomingRows, [fieldPath, field]) => {\n    const newRows = incomingRows\n\n    if (fieldPath.indexOf(`${path}.`) === 0) {\n      const [rowIndex] = fieldPath.replace(`${path}.`, '').split('.')\n      if (!newRows[rowIndex]) {\n        newRows[rowIndex] = {}\n      }\n      newRows[rowIndex][fieldPath.replace(`${path}.${String(rowIndex)}.`, '')] = { ...field }\n    } else {\n      remainingFields[fieldPath] = field\n    }\n\n    return newRows\n  }, [])\n\n  return {\n    remainingFields,\n    rows,\n  }\n}\n\nexport const flattenRows = (path: string, rows: FormState[]): FormState => {\n  return rows.reduce(\n    (fields, row, i) => ({\n      ...fields,\n      ...Object.entries(row).reduce((subFields, [subPath, subField]) => {\n        return {\n          ...subFields,\n          [`${path}.${i}.${subPath}`]: { ...subField },\n        }\n      }, {}),\n    }),\n    {},\n  )\n}\n"],"mappings":"AAAA;;AAQA,OAAO,MAAMA,YAAA,GAAeA,CAACC,IAAA,EAAcC,MAAA;EACzC,MAAMC,eAAA,GAA6B,CAAC;EAEpC,MAAMC,IAAA,GAAOC,MAAA,CAAOC,OAAO,CAACJ,MAAA,EAAQK,MAAM,CAAC,CAACC,YAAA,EAAc,CAACC,SAAA,EAAWC,KAAA,CAAM;IAC1E,MAAMC,OAAA,GAAUH,YAAA;IAEhB,IAAIC,SAAA,CAAUG,OAAO,CAAC,GAAGX,IAAA,GAAO,MAAM,GAAG;MACvC,MAAM,CAACY,QAAA,CAAS,GAAGJ,SAAA,CAAUK,OAAO,CAAC,GAAGb,IAAA,GAAO,EAAE,IAAIc,KAAK,CAAC;MAC3D,IAAI,CAACJ,OAAO,CAACE,QAAA,CAAS,EAAE;QACtBF,OAAO,CAACE,QAAA,CAAS,GAAG,CAAC;MACvB;MACAF,OAAO,CAACE,QAAA,CAAS,CAACJ,SAAA,CAAUK,OAAO,CAAC,GAAGb,IAAA,IAAQe,MAAA,CAAOH,QAAA,IAAY,EAAE,IAAI,GAAG;QAAE,GAAGH;MAAM;IACxF,OAAO;MACLP,eAAe,CAACM,SAAA,CAAU,GAAGC,KAAA;IAC/B;IAEA,OAAOC,OAAA;EACT,GAAG,EAAE;EAEL,OAAO;IACLR,eAAA;IACAC;EACF;AACF;AAEA,OAAO,MAAMa,WAAA,GAAcA,CAAChB,IAAA,EAAcG,IAAA;EACxC,OAAOA,IAAA,CAAKG,MAAM,CAChB,CAACL,MAAA,EAAQgB,GAAA,EAAKC,CAAA,MAAO;IACnB,GAAGjB,MAAM;IACT,GAAGG,MAAA,CAAOC,OAAO,CAACY,GAAA,EAAKX,MAAM,CAAC,CAACa,SAAA,EAAW,CAACC,OAAA,EAASC,QAAA,CAAS;MAC3D,OAAO;QACL,GAAGF,SAAS;QACZ,CAAC,GAAGnB,IAAA,IAAQkB,CAAA,IAAKE,OAAA,EAAS,GAAG;UAAE,GAAGC;QAAS;MAC7C;IACF,GAAG,CAAC;EACN,IACA,CAAC;AAEL","ignoreList":[]}