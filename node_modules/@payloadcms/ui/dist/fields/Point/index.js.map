{"version":3,"file":"index.js","names":["getTranslation","React","useCallback","useMemo","RenderCustomComponent","FieldDescription","FieldError","FieldLabel","useField","withCondition","useTranslation","mergeFieldStyles","fieldBaseClass","baseClass","PointFieldComponent","props","field","admin","className","description","placeholder","step","label","localized","required","path","pathFromProps","readOnly","validate","i18n","t","memoizedValidate","value","options","customComponents","AfterInput","BeforeInput","Description","Error","Label","disabled","setValue","showError","potentiallyStalePath","handleChange","e","index","val","parseFloat","target","Number","isNaN","coordinates","getCoordinateFieldLabel","type","suffix","fieldLabel","styles","_jsxs","filter","Boolean","join","style","_jsx","CustomComponent","Fallback","id","replace","name","onChange","PointField"],"sources":["../../../src/fields/Point/index.tsx"],"sourcesContent":["'use client'\nimport type { PointFieldClientComponent, PointFieldValidation } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport React, { useCallback, useMemo } from 'react'\n\nimport { RenderCustomComponent } from '../../elements/RenderCustomComponent/index.js'\nimport { FieldDescription } from '../../fields/FieldDescription/index.js'\nimport { FieldError } from '../../fields/FieldError/index.js'\nimport { FieldLabel } from '../../fields/FieldLabel/index.js'\nimport { useField } from '../../forms/useField/index.js'\nimport { withCondition } from '../../forms/withCondition/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { mergeFieldStyles } from '../mergeFieldStyles.js'\nimport './index.scss'\nimport { fieldBaseClass } from '../shared/index.js'\n\nconst baseClass = 'point'\n\nexport const PointFieldComponent: PointFieldClientComponent = (props) => {\n  const {\n    field,\n    field: {\n      admin: { className, description, placeholder, step } = {},\n      label,\n      localized,\n      required,\n    },\n    path: pathFromProps,\n    readOnly,\n    validate,\n  } = props\n\n  const { i18n, t } = useTranslation()\n\n  const memoizedValidate: PointFieldValidation = useCallback(\n    (value, options) => {\n      if (typeof validate === 'function') {\n        return validate(value, { ...options, required })\n      }\n    },\n    [validate, required],\n  )\n\n  const {\n    customComponents: { AfterInput, BeforeInput, Description, Error, Label } = {},\n    disabled,\n    path,\n    setValue,\n    showError,\n    value = [null, null],\n  } = useField<[number, number]>({\n    potentiallyStalePath: pathFromProps,\n    validate: memoizedValidate,\n  })\n\n  const handleChange = useCallback(\n    (e, index: 0 | 1) => {\n      let val = parseFloat(e.target.value)\n      if (Number.isNaN(val)) {\n        val = e.target.value\n      }\n      const coordinates = [...value]\n      coordinates[index] = val\n      setValue(coordinates)\n    },\n    [setValue, value],\n  )\n\n  const getCoordinateFieldLabel = (type: 'latitude' | 'longitude') => {\n    const suffix = type === 'longitude' ? t('fields:longitude') : t('fields:latitude')\n    const fieldLabel = label ? getTranslation(label, i18n) : ''\n\n    return `${fieldLabel}${fieldLabel ? ' - ' : ''}${suffix}`\n  }\n\n  const styles = useMemo(() => mergeFieldStyles(field), [field])\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        baseClass,\n        className,\n        showError && 'error',\n        (readOnly || disabled) && 'read-only',\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      style={styles}\n    >\n      <ul className={`${baseClass}__wrap`}>\n        <li>\n          <RenderCustomComponent\n            CustomComponent={Label}\n            Fallback={\n              <FieldLabel\n                label={getCoordinateFieldLabel('longitude')}\n                localized={localized}\n                path={path}\n                required={required}\n              />\n            }\n          />\n          <div className=\"input-wrapper\">\n            {BeforeInput}\n            {/* disable eslint rule because the label is dynamic */}\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <input\n              disabled={readOnly || disabled}\n              id={`field-longitude-${path?.replace(/\\./g, '__')}`}\n              name={`${path}.longitude`}\n              onChange={(e) => handleChange(e, 0)}\n              placeholder={getTranslation(placeholder, i18n)}\n              step={step}\n              type=\"number\"\n              value={value && typeof value[0] === 'number' ? value[0] : ''}\n            />\n            {AfterInput}\n          </div>\n        </li>\n        <li>\n          <RenderCustomComponent\n            CustomComponent={Label}\n            Fallback={\n              <FieldLabel\n                label={getCoordinateFieldLabel('latitude')}\n                localized={localized}\n                path={path}\n                required={required}\n              />\n            }\n          />\n          <div className=\"input-wrapper\">\n            <RenderCustomComponent\n              CustomComponent={Error}\n              Fallback={<FieldError path={path} showError={showError} />}\n            />\n            {BeforeInput}\n            {/* disable eslint rule because the label is dynamic */}\n            {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n            <input\n              disabled={readOnly || disabled}\n              id={`field-latitude-${path?.replace(/\\./g, '__')}`}\n              name={`${path}.latitude`}\n              onChange={(e) => handleChange(e, 1)}\n              placeholder={getTranslation(placeholder, i18n)}\n              step={step}\n              type=\"number\"\n              value={value && typeof value[1] === 'number' ? value[1] : ''}\n            />\n            {AfterInput}\n          </div>\n        </li>\n      </ul>\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  )\n}\n\nexport const PointField = withCondition(PointFieldComponent)\n"],"mappings":"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","ignoreList":[]}