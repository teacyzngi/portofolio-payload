{"version":3,"file":"Input.js","names":["c","_c","getTranslation","React","ReactSelect","RenderCustomComponent","FieldDescription","FieldError","FieldLabel","useTranslation","fieldBaseClass","SelectInput","props","$","id","AfterInput","BeforeInput","className","Description","description","Error","filterOption","hasMany","t0","isClearable","t1","isSortable","t2","label","Label","localized","onChange","onInputChange","options","path","placeholder","readOnly","required","showError","style","value","undefined","i18n","t3","valueToRender","Array","isArray","t4","val","matchingOption","find","option","map","option_0","matchingOption_0","t5","t6","filter","Boolean","t7","option_1","_jsxs","join","replace","children","_jsx","CustomComponent","Fallback","disabled","isMulti"],"sources":["../../../src/fields/Select/Input.tsx"],"sourcesContent":["'use client'\nimport type { LabelFunction, OptionObject, StaticDescription, StaticLabel } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport React from 'react'\n\nimport type { ReactSelectAdapterProps } from '../../elements/ReactSelect/types.js'\n\nimport { ReactSelect } from '../../elements/ReactSelect/index.js'\nimport { RenderCustomComponent } from '../../elements/RenderCustomComponent/index.js'\nimport { FieldDescription } from '../../fields/FieldDescription/index.js'\nimport { FieldError } from '../../fields/FieldError/index.js'\nimport { FieldLabel } from '../../fields/FieldLabel/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { fieldBaseClass } from '../shared/index.js'\nimport './index.scss'\n\nexport type SelectInputProps = {\n  readonly AfterInput?: React.ReactNode\n  readonly BeforeInput?: React.ReactNode\n  readonly className?: string\n  readonly Description?: React.ReactNode\n  readonly description?: StaticDescription\n  readonly Error?: React.ReactNode\n  readonly filterOption?: ReactSelectAdapterProps['filterOption']\n  readonly hasMany?: boolean\n  readonly id?: string\n  readonly isClearable?: boolean\n  readonly isSortable?: boolean\n  readonly Label?: React.ReactNode\n  readonly label?: StaticLabel\n  readonly localized?: boolean\n  readonly name: string\n  readonly onChange?: ReactSelectAdapterProps['onChange']\n  readonly onInputChange?: ReactSelectAdapterProps['onInputChange']\n  readonly options?: OptionObject[]\n  readonly path: string\n  readonly placeholder?: LabelFunction | string\n  readonly readOnly?: boolean\n  readonly required?: boolean\n  readonly showError?: boolean\n  readonly style?: React.CSSProperties\n  readonly value?: string | string[]\n}\n\nexport const SelectInput: React.FC<SelectInputProps> = (props) => {\n  const {\n    id,\n    AfterInput,\n    BeforeInput,\n    className,\n    Description,\n    description,\n    Error,\n    filterOption,\n    hasMany = false,\n    isClearable = true,\n    isSortable = true,\n    label,\n    Label,\n    localized,\n    onChange,\n    onInputChange,\n    options,\n    path,\n    placeholder,\n    readOnly,\n    required,\n    showError,\n    style,\n    value,\n  } = props\n\n  const { i18n } = useTranslation()\n\n  let valueToRender\n\n  if (hasMany && Array.isArray(value)) {\n    valueToRender = value.map((val) => {\n      const matchingOption = options.find((option) => option.value === val)\n      return {\n        label: matchingOption ? getTranslation(matchingOption.label, i18n) : val,\n        value: matchingOption?.value ?? val,\n      }\n    })\n  } else if (value) {\n    const matchingOption = options.find((option) => option.value === value)\n    valueToRender = {\n      label: matchingOption ? getTranslation(matchingOption.label, i18n) : value,\n      value: matchingOption?.value ?? value,\n    }\n  } else {\n    // If value is not present then render nothing, allowing select fields to reset to their initial 'Select an option' state\n    valueToRender = null\n  }\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        'select',\n        className,\n        showError && 'error',\n        readOnly && 'read-only',\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      id={`field-${path.replace(/\\./g, '__')}`}\n      style={style}\n    >\n      <RenderCustomComponent\n        CustomComponent={Label}\n        Fallback={\n          <FieldLabel label={label} localized={localized} path={path} required={required} />\n        }\n      />\n      <div className={`${fieldBaseClass}__wrap`}>\n        <RenderCustomComponent\n          CustomComponent={Error}\n          Fallback={<FieldError path={path} showError={showError} />}\n        />\n        {BeforeInput}\n        <ReactSelect\n          disabled={readOnly}\n          filterOption={filterOption}\n          id={id}\n          isClearable={isClearable}\n          isMulti={hasMany}\n          isSortable={isSortable}\n          onChange={onChange}\n          onInputChange={onInputChange}\n          options={options.map((option) => ({\n            ...option,\n            label: getTranslation(option.label, i18n),\n          }))}\n          placeholder={placeholder}\n          showError={showError}\n          value={valueToRender as OptionObject}\n        />\n        {AfterInput}\n      </div>\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}