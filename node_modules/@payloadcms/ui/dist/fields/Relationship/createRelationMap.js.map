{"version":3,"file":"createRelationMap.js","names":["createRelationMap","hasMany","relationTo","value","relationMap","reduce","map","current","add","relation","id","push","forEach","val"],"sources":["../../../src/fields/Relationship/createRelationMap.ts"],"sourcesContent":["'use client'\nimport type { HasManyValueUnion } from './types.js'\n\ntype RelationMap = {\n  [relation: string]: (number | string)[]\n}\n\ntype CreateRelationMap = (\n  args: {\n    relationTo: string[]\n  } & HasManyValueUnion,\n) => RelationMap\n\nexport const createRelationMap: CreateRelationMap = ({ hasMany, relationTo, value }) => {\n  const relationMap: RelationMap = relationTo.reduce((map, current) => {\n    return { ...map, [current]: [] }\n  }, {})\n\n  if (value === null) {\n    return relationMap\n  }\n\n  if (value) {\n    const add = (relation: string, id: number | string) => {\n      if ((typeof id === 'string' || typeof id === 'number') && typeof relation === 'string') {\n        if (relationMap[relation]) {\n          relationMap[relation].push(id)\n        } else {\n          relationMap[relation] = [id]\n        }\n      }\n    }\n    if (hasMany === true) {\n      value.forEach((val) => {\n        if (val) {\n          add(val.relationTo, val.value)\n        }\n      })\n    } else {\n      add(value.relationTo, value.value)\n    }\n  }\n\n  return relationMap\n}\n"],"mappings":"AAAA;;AAaA,OAAO,MAAMA,iBAAA,GAAuCA,CAAC;EAAEC,OAAO;EAAEC,UAAU;EAAEC;AAAK,CAAE;EACjF,MAAMC,WAAA,GAA2BF,UAAA,CAAWG,MAAM,CAAC,CAACC,GAAA,EAAKC,OAAA;IACvD,OAAO;MAAE,GAAGD,GAAG;MAAE,CAACC,OAAA,GAAU;IAAG;EACjC,GAAG,CAAC;EAEJ,IAAIJ,KAAA,KAAU,MAAM;IAClB,OAAOC,WAAA;EACT;EAEA,IAAID,KAAA,EAAO;IACT,MAAMK,GAAA,GAAMA,CAACC,QAAA,EAAkBC,EAAA;MAC7B,IAAI,CAAC,OAAOA,EAAA,KAAO,YAAY,OAAOA,EAAA,KAAO,QAAO,KAAM,OAAOD,QAAA,KAAa,UAAU;QACtF,IAAIL,WAAW,CAACK,QAAA,CAAS,EAAE;UACzBL,WAAW,CAACK,QAAA,CAAS,CAACE,IAAI,CAACD,EAAA;QAC7B,OAAO;UACLN,WAAW,CAACK,QAAA,CAAS,GAAG,CAACC,EAAA,CAAG;QAC9B;MACF;IACF;IACA,IAAIT,OAAA,KAAY,MAAM;MACpBE,KAAA,CAAMS,OAAO,CAAEC,GAAA;QACb,IAAIA,GAAA,EAAK;UACPL,GAAA,CAAIK,GAAA,CAAIX,UAAU,EAAEW,GAAA,CAAIV,KAAK;QAC/B;MACF;IACF,OAAO;MACLK,GAAA,CAAIL,KAAA,CAAMD,UAAU,EAAEC,KAAA,CAAMA,KAAK;IACnC;EACF;EAEA,OAAOC,WAAA;AACT","ignoreList":[]}