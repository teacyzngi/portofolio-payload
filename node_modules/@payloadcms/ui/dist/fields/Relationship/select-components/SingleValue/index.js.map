{"version":3,"file":"index.js","names":["c","_c","React","Fragment","useState","components","SelectComponents","Tooltip","EditIcon","useAuth","useTranslation","baseClass","SingleValue","props","$","children","data","t0","selectProps","t1","allowEdit","label","relationTo","value","t2","undefined","customProps","t3","t4","onDocumentOpen","showTooltip","setShowTooltip","t","permissions","hasReadPermission","Boolean","collections","read","t5","_jsx","className","_jsxs","onClick","event","id","collectionSlug","openInNewTab","metaKey","ctrlKey","onKeyDown","_temp","onMouseDown","_temp2","onMouseEnter","onMouseLeave","onTouchEnd","_temp3","type","show","e","key","stopPropagation","e_0","e_1"],"sources":["../../../../../src/fields/Relationship/select-components/SingleValue/index.tsx"],"sourcesContent":["'use client'\nimport type { SingleValueProps } from 'react-select'\n\nimport React, { Fragment, useState } from 'react'\nimport { components as SelectComponents } from 'react-select'\n\nimport type { ReactSelectAdapterProps } from '../../../../elements/ReactSelect/types.js'\nimport type { Option } from '../../types.js'\n\nimport { Tooltip } from '../../../../elements/Tooltip/index.js'\nimport { EditIcon } from '../../../../icons/Edit/index.js'\nimport { useAuth } from '../../../../providers/Auth/index.js'\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport './index.scss'\n\nconst baseClass = 'relationship--single-value'\n\nexport const SingleValue: React.FC<\n  {\n    selectProps: {\n      // TODO Fix this - moduleResolution 16 breaks our declare module\n      customProps: ReactSelectAdapterProps['customProps']\n    }\n  } & SingleValueProps<Option>\n> = (props) => {\n  const {\n    children,\n    data: { allowEdit, label, relationTo, value },\n    selectProps: { customProps: { onDocumentOpen } = {} } = {},\n  } = props\n\n  const [showTooltip, setShowTooltip] = useState(false)\n  const { t } = useTranslation()\n  const { permissions } = useAuth()\n  const hasReadPermission = Boolean(permissions?.collections?.[relationTo]?.read)\n\n  return (\n    <SelectComponents.SingleValue {...props} className={baseClass}>\n      <div className={`${baseClass}__label`}>\n        <div className={`${baseClass}__label-text`}>\n          <div className={`${baseClass}__text`}>{children}</div>\n          {relationTo && hasReadPermission && allowEdit !== false && (\n            <Fragment>\n              <button\n                aria-label={t('general:editLabel', { label })}\n                className={`${baseClass}__drawer-toggler`}\n                onClick={(event) => {\n                  setShowTooltip(false)\n                  onDocumentOpen({\n                    id: value,\n                    collectionSlug: relationTo,\n                    hasReadPermission,\n                    openInNewTab: event.metaKey || event.ctrlKey,\n                  })\n                }}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.stopPropagation()\n                  }\n                }}\n                onMouseDown={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n                onMouseEnter={() => setShowTooltip(true)}\n                onMouseLeave={() => setShowTooltip(false)}\n                onTouchEnd={(e) => e.stopPropagation()} // prevents react-select dropdown from openingtype=\"button\"\n                type=\"button\"\n              >\n                <Tooltip className={`${baseClass}__tooltip`} show={showTooltip}>\n                  {t('general:edit')}\n                </Tooltip>\n                <EditIcon />\n              </button>\n            </Fragment>\n          )}\n        </div>\n      </div>\n    </SelectComponents.SingleValue>\n  )\n}\n"],"mappings":"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","ignoreList":[]}