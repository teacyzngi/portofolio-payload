{"version":3,"file":"index.js","names":["React","createContext","LoadingOverlay","useDelayedRender","useTranslation","defaultLoadingOverlayState","reducer","animatedDuration","Context","isOnScreen","toggleLoadingOverlay","undefined","LoadingOverlayProvider","children","t","fallbackText","overlays","dispatchOverlay","useReducer","isMounted","isUnmounting","triggerDelayedRender","delayBeforeShow","inTimeout","minShowTime","outTimeout","show","isLoading","useCallback","type","key","loadingText","payload","_jsxs","value","_jsx","animationDuration","overlayType","useLoadingOverlay","contextHook","use","Error"],"sources":["../../../src/elements/LoadingOverlay/index.tsx"],"sourcesContent":["'use client'\nimport React, { createContext } from 'react'\n\nimport type { LoadingOverlayContext, ToggleLoadingOverlay } from './types.js'\n\nimport { LoadingOverlay } from '../../elements/Loading/index.js'\nimport { useDelayedRender } from '../../hooks/useDelayedRender.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { defaultLoadingOverlayState, reducer } from './reducer.js'\n\nconst animatedDuration = 250\n\nconst Context = createContext({\n  isOnScreen: false,\n  toggleLoadingOverlay: undefined,\n})\n\nexport const LoadingOverlayProvider: React.FC<{ children?: React.ReactNode }> = ({ children }) => {\n  const { t } = useTranslation()\n  const fallbackText = t('general:loading')\n  const [overlays, dispatchOverlay] = React.useReducer(reducer, defaultLoadingOverlayState)\n\n  const { isMounted, isUnmounting, triggerDelayedRender } = useDelayedRender({\n    delayBeforeShow: 1000,\n    inTimeout: animatedDuration,\n    minShowTime: 500,\n    outTimeout: animatedDuration,\n    show: overlays.isLoading,\n  })\n\n  const toggleLoadingOverlay = React.useCallback<ToggleLoadingOverlay>(\n    ({ type, isLoading, key, loadingText = fallbackText }) => {\n      if (isLoading) {\n        triggerDelayedRender()\n        dispatchOverlay({\n          type: 'add',\n          payload: {\n            type,\n            key,\n            loadingText,\n          },\n        })\n      } else {\n        dispatchOverlay({\n          type: 'remove',\n          payload: {\n            type,\n            key,\n          },\n        })\n      }\n    },\n    [triggerDelayedRender, fallbackText],\n  )\n\n  return (\n    <Context\n      value={{\n        isOnScreen: isMounted,\n        toggleLoadingOverlay,\n      }}\n    >\n      {isMounted && (\n        <LoadingOverlay\n          animationDuration={`${animatedDuration}ms`}\n          loadingText={overlays.loadingText || fallbackText}\n          overlayType={overlays.overlayType}\n          show={!isUnmounting}\n        />\n      )}\n      {children}\n    </Context>\n  )\n}\n\nexport const useLoadingOverlay = (): LoadingOverlayContext => {\n  const contextHook = React.use(Context)\n  if (contextHook === undefined) {\n    throw new Error('useLoadingOverlay must be used within a LoadingOverlayProvider')\n  }\n\n  return contextHook\n}\n"],"mappings":"AAAA;;;AACA,OAAOA,KAAA,IAASC,aAAa,QAAQ;AAIrC,SAASC,cAAc,QAAQ;AAC/B,SAASC,gBAAgB,QAAQ;AACjC,SAASC,cAAc,QAAQ;AAC/B,SAASC,0BAA0B,EAAEC,OAAO,QAAQ;AAEpD,MAAMC,gBAAA,GAAmB;AAEzB,MAAMC,OAAA,gBAAUP,aAAA,CAAc;EAC5BQ,UAAA,EAAY;EACZC,oBAAA,EAAsBC;AACxB;AAEA,OAAO,MAAMC,sBAAA,GAAmEA,CAAC;EAAEC;AAAQ,CAAE;EAC3F,MAAM;IAAEC;EAAC,CAAE,GAAGV,cAAA;EACd,MAAMW,YAAA,GAAeD,CAAA,CAAE;EACvB,MAAM,CAACE,QAAA,EAAUC,eAAA,CAAgB,GAAGjB,KAAA,CAAMkB,UAAU,CAACZ,OAAA,EAASD,0BAAA;EAE9D,MAAM;IAAEc,SAAS;IAAEC,YAAY;IAAEC;EAAoB,CAAE,GAAGlB,gBAAA,CAAiB;IACzEmB,eAAA,EAAiB;IACjBC,SAAA,EAAWhB,gBAAA;IACXiB,WAAA,EAAa;IACbC,UAAA,EAAYlB,gBAAA;IACZmB,IAAA,EAAMV,QAAA,CAASW;EACjB;EAEA,MAAMjB,oBAAA,GAAuBV,KAAA,CAAM4B,WAAW,CAC5C,CAAC;IAAEC,IAAI;IAAEF,SAAS;IAAEG,GAAG;IAAEC,WAAA,GAAchB;EAAY,CAAE;IACnD,IAAIY,SAAA,EAAW;MACbN,oBAAA;MACAJ,eAAA,CAAgB;QACdY,IAAA,EAAM;QACNG,OAAA,EAAS;UACPH,IAAA;UACAC,GAAA;UACAC;QACF;MACF;IACF,OAAO;MACLd,eAAA,CAAgB;QACdY,IAAA,EAAM;QACNG,OAAA,EAAS;UACPH,IAAA;UACAC;QACF;MACF;IACF;EACF,GACA,CAACT,oBAAA,EAAsBN,YAAA,CAAa;EAGtC,oBACEkB,KAAA,CAACzB,OAAA;IACC0B,KAAA,EAAO;MACLzB,UAAA,EAAYU,SAAA;MACZT;IACF;eAECS,SAAA,iBACCgB,IAAA,CAACjC,cAAA;MACCkC,iBAAA,EAAmB,GAAG7B,gBAAA,IAAoB;MAC1CwB,WAAA,EAAaf,QAAA,CAASe,WAAW,IAAIhB,YAAA;MACrCsB,WAAA,EAAarB,QAAA,CAASqB,WAAW;MACjCX,IAAA,EAAM,CAACN;QAGVP,QAAA;;AAGP;AAEA,OAAO,MAAMyB,iBAAA,GAAoBA,CAAA;EAC/B,MAAMC,WAAA,GAAcvC,KAAA,CAAMwC,GAAG,CAAChC,OAAA;EAC9B,IAAI+B,WAAA,KAAgB5B,SAAA,EAAW;IAC7B,MAAM,IAAI8B,KAAA,CAAM;EAClB;EAEA,OAAOF,WAAA;AACT","ignoreList":[]}