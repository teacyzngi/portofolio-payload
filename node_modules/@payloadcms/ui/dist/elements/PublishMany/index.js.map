{"version":3,"file":"index.js","names":["c","_c","useModal","React","useAuth","SelectAllStatus","useSelection","useTranslation","ListSelectionButton","PublishManyDrawerContent","PublishMany","props","$","count","selectAll","selectedIDs","toggleAll","t0","t1","AllAvailable","t2","_jsx","PublishMany_v4","ids","onSuccess","collection","modalPrefix","where","slug","versions","undefined","permissions","t","openModal","collectionPermissions","collections","hasPermission","update","drawerSlug","drafts","_jsxs","Fragment","children","onClick"],"sources":["../../../src/elements/PublishMany/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig, Where } from 'payload'\n\nimport { useModal } from '@faceless-ui/modal'\nimport React from 'react'\n\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { SelectAllStatus, useSelection } from '../../providers/Selection/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { ListSelectionButton } from '../ListSelection/index.js'\nimport { PublishManyDrawerContent } from './DrawerContent.js'\n\nexport type PublishManyProps = {\n  collection: ClientCollectionConfig\n}\n\nexport const PublishMany: React.FC<PublishManyProps> = (props) => {\n  const { count, selectAll, selectedIDs, toggleAll } = useSelection()\n\n  return (\n    <PublishMany_v4\n      {...props}\n      count={count}\n      ids={selectedIDs}\n      onSuccess={() => toggleAll()}\n      selectAll={selectAll === SelectAllStatus.AllAvailable}\n    />\n  )\n}\n\ntype PublishMany_v4Props = {\n  count: number\n  ids: (number | string)[]\n  /**\n   * When multiple PublishMany components are rendered on the page, this will differentiate them.\n   */\n  modalPrefix?: string\n  onSuccess?: () => void\n  selectAll: boolean\n  where?: Where\n} & PublishManyProps\n\nexport const PublishMany_v4: React.FC<PublishMany_v4Props> = (props) => {\n  const {\n    collection,\n    collection: { slug, versions } = {},\n    count,\n    ids,\n    modalPrefix,\n    onSuccess,\n    selectAll,\n    where,\n  } = props\n\n  const { permissions } = useAuth()\n  const { t } = useTranslation()\n\n  const { openModal } = useModal()\n\n  const collectionPermissions = permissions?.collections?.[slug]\n  const hasPermission = collectionPermissions?.update\n\n  const drawerSlug = `${modalPrefix ? `${modalPrefix}-` : ''}publish-${slug}`\n\n  if (!versions?.drafts || count === 0 || !hasPermission) {\n    return null\n  }\n\n  return (\n    <React.Fragment>\n      <ListSelectionButton\n        aria-label={t('version:publish')}\n        onClick={() => {\n          openModal(drawerSlug)\n        }}\n      >\n        {t('version:publish')}\n      </ListSelectionButton>\n      <PublishManyDrawerContent\n        collection={collection}\n        drawerSlug={drawerSlug}\n        ids={ids}\n        onSuccess={onSuccess}\n        selectAll={selectAll}\n        where={where}\n      />\n    </React.Fragment>\n  )\n}\n"],"mappings":"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","ignoreList":[]}