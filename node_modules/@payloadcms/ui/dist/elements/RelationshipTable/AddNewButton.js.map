{"version":3,"file":"AddNewButton.js","names":["getTranslation","Button","Popup","PopupList","AddNewButton","allowCreate","baseClass","buttonStyle","className","collections","i18n","icon","label","onClick","permissions","relationTo","isPolymorphic","Array","isArray","_jsx","button","buttonType","horizontalAlign","render","close","closePopup","ButtonGroup","map","relatedCollection","create","find","each","slug","labels","singular","size"],"sources":["../../../src/elements/RelationshipTable/AddNewButton.tsx"],"sourcesContent":["'use client'\nimport type { I18nClient } from '@payloadcms/translations'\nimport type { ClientCollectionConfig, SanitizedPermissions } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\n\nimport type { Props as ButtonProps } from '../../elements/Button/types.js'\n\nimport { Button } from '../../elements/Button/index.js'\nimport { Popup, PopupList } from '../Popup/index.js'\n\nexport const AddNewButton = ({\n  allowCreate,\n  baseClass,\n  buttonStyle,\n  className,\n  collections,\n  i18n,\n  icon,\n  label,\n  onClick,\n  permissions,\n  relationTo,\n}: {\n  allowCreate: boolean\n  baseClass: string\n  buttonStyle?: ButtonProps['buttonStyle']\n  className?: string\n  collections: ClientCollectionConfig[]\n  i18n: I18nClient\n  icon?: ButtonProps['icon']\n  label: string\n  onClick: (selectedCollection?: string) => void\n  permissions: SanitizedPermissions\n  relationTo: string | string[]\n}) => {\n  if (!allowCreate) {\n    return null\n  }\n\n  const isPolymorphic = Array.isArray(relationTo)\n\n  if (!isPolymorphic) {\n    return (\n      <Button buttonStyle={buttonStyle} className={className} onClick={() => onClick()}>\n        {label}\n      </Button>\n    )\n  }\n\n  return (\n    <div className={`${baseClass}__add-new-polymorphic-wrapper`}>\n      <Popup\n        button={\n          <Button buttonStyle={buttonStyle} className={className} icon={icon}>\n            {label}\n          </Button>\n        }\n        buttonType=\"custom\"\n        horizontalAlign=\"center\"\n        render={({ close: closePopup }) => (\n          <PopupList.ButtonGroup>\n            {relationTo.map((relatedCollection) => {\n              if (permissions.collections[relatedCollection]?.create) {\n                return (\n                  <PopupList.Button\n                    className={`${baseClass}__relation-button--${relatedCollection}`}\n                    key={relatedCollection}\n                    onClick={() => {\n                      closePopup()\n                      onClick(relatedCollection)\n                    }}\n                  >\n                    {getTranslation(\n                      collections.find((each) => each.slug === relatedCollection).labels.singular,\n                      i18n,\n                    )}\n                  </PopupList.Button>\n                )\n              }\n\n              return null\n            })}\n          </PopupList.ButtonGroup>\n        )}\n        size=\"medium\"\n      />\n    </div>\n  )\n}\n"],"mappings":"AAAA;;;AAIA,SAASA,cAAc,QAAQ;AAI/B,SAASC,MAAM,QAAQ;AACvB,SAASC,KAAK,EAAEC,SAAS,QAAQ;AAEjC,OAAO,MAAMC,YAAA,GAAeA,CAAC;EAC3BC,WAAW;EACXC,SAAS;EACTC,WAAW;EACXC,SAAS;EACTC,WAAW;EACXC,IAAI;EACJC,IAAI;EACJC,KAAK;EACLC,OAAO;EACPC,WAAW;EACXC;AAAU,CAaX;EACC,IAAI,CAACV,WAAA,EAAa;IAChB,OAAO;EACT;EAEA,MAAMW,aAAA,GAAgBC,KAAA,CAAMC,OAAO,CAACH,UAAA;EAEpC,IAAI,CAACC,aAAA,EAAe;IAClB,oBACEG,IAAA,CAAClB,MAAA;MAAOM,WAAA,EAAaA,WAAA;MAAaC,SAAA,EAAWA,SAAA;MAAWK,OAAA,EAASA,CAAA,KAAMA,OAAA;gBACpED;;EAGP;EAEA,oBACEO,IAAA,CAAC;IAAIX,SAAA,EAAW,GAAGF,SAAA,+BAAwC;cACzD,aAAAa,IAAA,CAACjB,KAAA;MACCkB,MAAA,eACED,IAAA,CAAClB,MAAA;QAAOM,WAAA,EAAaA,WAAA;QAAaC,SAAA,EAAWA,SAAA;QAAWG,IAAA,EAAMA,IAAA;kBAC3DC;;MAGLS,UAAA,EAAW;MACXC,eAAA,EAAgB;MAChBC,MAAA,EAAQA,CAAC;QAAEC,KAAA,EAAOC;MAAU,CAAE,kBAC5BN,IAAA,CAAChB,SAAA,CAAUuB,WAAW;kBACnBX,UAAA,CAAWY,GAAG,CAAEC,iBAAA;UACf,IAAId,WAAA,CAAYL,WAAW,CAACmB,iBAAA,CAAkB,EAAEC,MAAA,EAAQ;YACtD,oBACEV,IAAA,CAAChB,SAAA,CAAUF,MAAM;cACfO,SAAA,EAAW,GAAGF,SAAA,sBAA+BsB,iBAAA,EAAmB;cAEhEf,OAAA,EAASA,CAAA;gBACPY,UAAA;gBACAZ,OAAA,CAAQe,iBAAA;cACV;wBAEC5B,cAAA,CACCS,WAAA,CAAYqB,IAAI,CAAEC,IAAA,IAASA,IAAA,CAAKC,IAAI,KAAKJ,iBAAA,EAAmBK,MAAM,CAACC,QAAQ,EAC3ExB,IAAA;eARGkB,iBAAA;UAYX;UAEA,OAAO;QACT;;MAGJO,IAAA,EAAK;;;AAIb","ignoreList":[]}