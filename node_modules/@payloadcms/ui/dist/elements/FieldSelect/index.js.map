{"version":3,"file":"index.js","names":["c","_c","React","useState","FieldLabel","useForm","useTranslation","filterOutUploadFields","ReactSelect","reduceFieldOptions","baseClass","FieldSelect","t0","$","fields","onChange","permissions","t","dispatchFields","getFields","t1","formState","options","t2","t3","selected","_jsxs","className","children","_jsx","label","getOptionValue","_temp","isMulti","option","value","String","path"],"sources":["../../../src/elements/FieldSelect/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientField, FormState, SanitizedFieldPermissions } from 'payload'\n\nimport React, { useState } from 'react'\n\nimport type { FieldAction } from '../../forms/Form/types.js'\nimport type { FieldOption } from './reduceFieldOptions.js'\n\nimport { FieldLabel } from '../../fields/FieldLabel/index.js'\nimport { useForm } from '../../forms/Form/context.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { filterOutUploadFields } from '../../utilities/filterOutUploadFields.js'\nimport { ReactSelect } from '../ReactSelect/index.js'\nimport { reduceFieldOptions } from './reduceFieldOptions.js'\nimport './index.scss'\n\nconst baseClass = 'field-select'\n\nexport type OnFieldSelect = ({\n  dispatchFields,\n  formState,\n  selected,\n}: {\n  dispatchFields: React.Dispatch<FieldAction>\n  formState: FormState\n  selected: FieldOption[]\n}) => void\n\nexport type FieldSelectProps = {\n  readonly fields: ClientField[]\n  readonly onChange: OnFieldSelect\n  readonly permissions:\n    | {\n        [fieldName: string]: SanitizedFieldPermissions\n      }\n    | SanitizedFieldPermissions\n}\n\nexport const FieldSelect: React.FC<FieldSelectProps> = ({ fields, onChange, permissions }) => {\n  const { t } = useTranslation()\n  const { dispatchFields, getFields } = useForm()\n\n  const [options] = useState<FieldOption[]>(() =>\n    reduceFieldOptions({\n      fields: filterOutUploadFields(fields),\n      formState: getFields(),\n      permissions,\n    }),\n  )\n\n  return (\n    <div className={baseClass}>\n      <FieldLabel label={t('fields:selectFieldsToEdit')} />\n      <ReactSelect\n        getOptionValue={(option) => {\n          if (typeof option.value === 'object' && 'path' in option.value) {\n            return String(option.value.path)\n          }\n          return String(option.value)\n        }}\n        isMulti\n        onChange={(selected: FieldOption[]) =>\n          onChange({ dispatchFields, formState: getFields(), selected })\n        }\n        options={options}\n      />\n    </div>\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AAGA,OAAOC,KAAA,IAASC,QAAQ,QAAQ;AAKhC,SAASC,UAAU,QAAQ;AAC3B,SAASC,OAAO,QAAQ;AACxB,SAASC,cAAc,QAAQ;AAC/B,SAASC,qBAAqB,QAAQ;AACtC,SAASC,WAAW,QAAQ;AAC5B,SAASC,kBAAkB,QAAQ;AACnC,OAAO;AAEP,MAAMC,SAAA,GAAY;AAsBlB,OAAO,MAAMC,WAAA,GAA0CC,EAAA;EAAA,MAAAC,CAAA,GAAAZ,EAAA;EAAC;IAAAa,MAAA;IAAAC,QAAA;IAAAC;EAAA,IAAAJ,EAAiC;EACvF;IAAAK;EAAA,IAAcX,cAAA;EACd;IAAAY,cAAA;IAAAC;EAAA,IAAsCd,OAAA;EAAA,IAAAe,EAAA;EAAA,IAAAP,CAAA,QAAAC,MAAA,IAAAD,CAAA,QAAAM,SAAA,IAAAN,CAAA,QAAAG,WAAA;IAEII,EAAA,GAAAA,CAAA,KACxCX,kBAAA;MAAAK,MAAA,EACUP,qBAAA,CAAsBO,MAAA;MAAAO,SAAA,EACnBF,SAAA;MAAAH;IAAA,CAEb;IAAAH,CAAA,MAAAC,MAAA;IAAAD,CAAA,MAAAM,SAAA;IAAAN,CAAA,MAAAG,WAAA;IAAAH,CAAA,MAAAO,EAAA;EAAA;IAAAA,EAAA,GAAAP,CAAA;EAAA;EALF,OAAAS,OAAA,IAAkBnB,QAAA,CAAwBiB,EAKxC;EAAA,IAAAG,EAAA;EAAA,IAAAV,CAAA,QAAAK,cAAA,IAAAL,CAAA,QAAAM,SAAA,IAAAN,CAAA,QAAAE,QAAA,IAAAF,CAAA,QAAAS,OAAA,IAAAT,CAAA,QAAAI,CAAA;IAAA,IAAAO,EAAA;IAAA,IAAAX,CAAA,SAAAK,cAAA,IAAAL,CAAA,SAAAM,SAAA,IAAAN,CAAA,SAAAE,QAAA;MAccS,EAAA,GAAAC,QAAA,IACRV,QAAA;QAAAG,cAAA;QAAAG,SAAA,EAAsCF,SAAA;QAAAM;MAAA,CAAsB;MAAAZ,CAAA,OAAAK,cAAA;MAAAL,CAAA,OAAAM,SAAA;MAAAN,CAAA,OAAAE,QAAA;MAAAF,CAAA,OAAAW,EAAA;IAAA;MAAAA,EAAA,GAAAX,CAAA;IAAA;IAXlEU,EAAA,GAAAG,KAAA,CAAC;MAAAC,SAAA,EAAAjB,SAAA;MAAAkB,QAAA,GACCC,IAAA,CAAAzB,UAAA;QAAA0B,KAAA,EAAmBb,CAAA,CAAE;MAAA,C,GACrBY,IAAA,CAAArB,WAAA;QAAAuB,cAAA,EAAAC,KAAA;QAAAC,OAAA;QAAAlB,QAAA,EAQYS,EACoD;QAAAF;MAAA,C;;;;;;;;;;;SAXlEC,E;CAiBJ;AA9BuD,SAAAS,MAAAE,MAAA;EAAA,IAiBzC,OAAOA,MAAA,CAAAC,KAAA,KAAiB,YAAY,UAAUD,MAAA,CAAAC,KAAY;IAAA,OACrDC,MAAA,CAAOF,MAAA,CAAAC,KAAA,CAAAE,IAAiB;EAAA;EAAA,OAE1BD,MAAA,CAAOF,MAAA,CAAAC,KAAY;AAAA","ignoreList":[]}