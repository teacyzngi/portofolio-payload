{"version":3,"file":"index.js","names":["useDroppable","React","DraggableWithClick","HiddenCell","TableCell","baseClass","DraggableTableRow","id","columns","disabled","dragData","isDroppable","_isDroppable","isFocused","isSelected","isSelecting","itemKey","onClick","onKeyDown","isOver","setNodeRef","data","ref","useRef","useEffect","copyOfRef","current","focus","blur","_jsxs","as","className","filter","Boolean","join","map","col","i","_jsx","length"],"sources":["../../../../src/elements/FolderView/DraggableTableRow/index.tsx"],"sourcesContent":["'use client'\nimport { useDroppable } from '@dnd-kit/core'\nimport React from 'react'\n\nimport { DraggableWithClick } from '../DraggableWithClick/index.js'\nimport { HiddenCell, TableCell } from '../SimpleTable/index.js'\nimport './index.scss'\n\nconst baseClass = 'draggable-table-row'\ntype Props = {\n  readonly columns: React.ReactNode[]\n  readonly disabled?: boolean\n  readonly dragData?: Record<string, unknown>\n  readonly id: number | string\n  readonly isDroppable?: boolean\n  readonly isFocused?: boolean\n  readonly isSelected?: boolean\n  readonly isSelecting?: boolean\n  readonly itemKey: string\n  readonly onClick?: (e: React.MouseEvent) => void\n  readonly onKeyDown?: (e: React.KeyboardEvent) => void\n}\nexport function DraggableTableRow({\n  id,\n  columns,\n  disabled = false,\n  dragData,\n  isDroppable: _isDroppable,\n  isFocused,\n  isSelected,\n  isSelecting,\n  itemKey,\n  onClick,\n  onKeyDown,\n}: Props) {\n  const isDroppable = !disabled && _isDroppable && !isSelected\n  const { isOver, setNodeRef } = useDroppable({\n    id,\n    data: dragData,\n    disabled: !isDroppable,\n  })\n  const ref = React.useRef(null)\n\n  React.useEffect(() => {\n    const copyOfRef = ref.current\n    if (isFocused && ref.current) {\n      ref.current.focus()\n    } else if (!isFocused && ref.current) {\n      ref.current.blur()\n    }\n\n    return () => {\n      if (copyOfRef) {\n        copyOfRef.blur()\n      }\n    }\n  }, [isFocused])\n\n  return (\n    <DraggableWithClick\n      as=\"tr\"\n      className={[\n        baseClass,\n        isSelected && `${baseClass}--selected`,\n        isSelecting && `${baseClass}--selecting`,\n        disabled && `${baseClass}--disabled`,\n        isFocused && `${baseClass}--focused`,\n        isOver && `${baseClass}--over`,\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      key={itemKey}\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      ref={ref}\n    >\n      {columns.map((col, i) => (\n        <TableCell\n          className={[\n            `${baseClass}__cell-content`,\n            i === 0 && `${baseClass}__first-td`,\n            i === columns.length - 1 && `${baseClass}__last-td`,\n          ]\n            .filter(Boolean)\n            .join(' ')}\n          key={`${itemKey}-${i}`}\n        >\n          {col}\n        </TableCell>\n      ))}\n\n      {isDroppable ? (\n        <HiddenCell>\n          <div className={`${baseClass}__drop-area`} ref={setNodeRef} />\n        </HiddenCell>\n      ) : null}\n    </DraggableWithClick>\n  )\n}\n"],"mappings":"AAAA;;;AACA,SAASA,YAAY,QAAQ;AAC7B,OAAOC,KAAA,MAAW;AAElB,SAASC,kBAAkB,QAAQ;AACnC,SAASC,UAAU,EAAEC,SAAS,QAAQ;AACtC,OAAO;AAEP,MAAMC,SAAA,GAAY;AAclB,OAAO,SAASC,kBAAkB;EAChCC,EAAE;EACFC,OAAO;EACPC,QAAA,GAAW,KAAK;EAChBC,QAAQ;EACRC,WAAA,EAAaC,YAAY;EACzBC,SAAS;EACTC,UAAU;EACVC,WAAW;EACXC,OAAO;EACPC,OAAO;EACPC;AAAS,CACH;EACN,MAAMP,WAAA,GAAc,CAACF,QAAA,IAAYG,YAAA,IAAgB,CAACE,UAAA;EAClD,MAAM;IAAEK,MAAM;IAAEC;EAAU,CAAE,GAAGpB,YAAA,CAAa;IAC1CO,EAAA;IACAc,IAAA,EAAMX,QAAA;IACND,QAAA,EAAU,CAACE;EACb;EACA,MAAMW,GAAA,GAAMrB,KAAA,CAAMsB,MAAM,CAAC;EAEzBtB,KAAA,CAAMuB,SAAS,CAAC;IACd,MAAMC,SAAA,GAAYH,GAAA,CAAII,OAAO;IAC7B,IAAIb,SAAA,IAAaS,GAAA,CAAII,OAAO,EAAE;MAC5BJ,GAAA,CAAII,OAAO,CAACC,KAAK;IACnB,OAAO,IAAI,CAACd,SAAA,IAAaS,GAAA,CAAII,OAAO,EAAE;MACpCJ,GAAA,CAAII,OAAO,CAACE,IAAI;IAClB;IAEA,OAAO;MACL,IAAIH,SAAA,EAAW;QACbA,SAAA,CAAUG,IAAI;MAChB;IACF;EACF,GAAG,CAACf,SAAA,CAAU;EAEd,oBACEgB,KAAA,CAAC3B,kBAAA;IACC4B,EAAA,EAAG;IACHC,SAAA,EAAW,CACT1B,SAAA,EACAS,UAAA,IAAc,GAAGT,SAAA,YAAqB,EACtCU,WAAA,IAAe,GAAGV,SAAA,aAAsB,EACxCI,QAAA,IAAY,GAAGJ,SAAA,YAAqB,EACpCQ,SAAA,IAAa,GAAGR,SAAA,WAAoB,EACpCc,MAAA,IAAU,GAAGd,SAAA,QAAiB,CAC/B,CACE2B,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;IAERjB,OAAA,EAASA,OAAA;IACTC,SAAA,EAAWA,SAAA;IACXI,GAAA,EAAKA,GAAA;eAEJd,OAAA,CAAQ2B,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA,kBACjBC,IAAA,CAAClC,SAAA;MACC2B,SAAA,EAAW,CACT,GAAG1B,SAAA,gBAAyB,EAC5BgC,CAAA,KAAM,KAAK,GAAGhC,SAAA,YAAqB,EACnCgC,CAAA,KAAM7B,OAAA,CAAQ+B,MAAM,GAAG,KAAK,GAAGlC,SAAA,WAAoB,CACpD,CACE2B,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;gBAGPE;OAFI,GAAGpB,OAAA,IAAWqB,CAAA,EAAG,IAMzB1B,WAAA,gBACC2B,IAAA,CAACnC,UAAA;gBACC,aAAAmC,IAAA,CAAC;QAAIP,SAAA,EAAW,GAAG1B,SAAA,aAAsB;QAAEiB,GAAA,EAAKF;;SAEhD;KAxBCJ,OAAA;AA2BX","ignoreList":[]}