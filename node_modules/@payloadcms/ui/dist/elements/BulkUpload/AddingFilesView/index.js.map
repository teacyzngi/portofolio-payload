{"version":3,"file":"index.js","names":["c","_c","useModal","getTranslation","reduceFieldsToValues","React","useAuth","useConfig","DocumentInfoProvider","useTranslation","ActionsBar","discardBulkUploadModalSlug","DiscardWithoutSaving","EditForm","FileSidebar","useFormsManager","DrawerHeader","baseClass","AddingFilesView","$","activeIndex","collectionSlug","docPermissions","documentSlots","forms","hasPublishPermission","hasSavePermission","hasSubmitted","resetUploadEdits","updateUploadEdits","activeForm","getEntityConfig","i18n","user","openModal","t0","length","collectionConfig","t1","_jsxs","className","children","_jsx","onClose","title","labels","singular","currentEditor","hasPublishedDoc","id","initialData","formState","initialState","isLocked","lastUpdateTime","mostRecentVersionIsAutosaved","unpublishedVersionCount","Upload","versionCount","submitted","uploadEdits"],"sources":["../../../../src/elements/BulkUpload/AddingFilesView/index.tsx"],"sourcesContent":["'use client'\n\nimport { useModal } from '@faceless-ui/modal'\nimport { getTranslation } from '@payloadcms/translations'\nimport { reduceFieldsToValues } from 'payload/shared'\nimport React from 'react'\n\nimport { useAuth } from '../../../providers/Auth/index.js'\nimport { useConfig } from '../../../providers/Config/index.js'\nimport { DocumentInfoProvider } from '../../../providers/DocumentInfo/index.js'\nimport { useTranslation } from '../../../providers/Translation/index.js'\nimport { ActionsBar } from '../ActionsBar/index.js'\nimport { discardBulkUploadModalSlug, DiscardWithoutSaving } from '../DiscardWithoutSaving/index.js'\nimport { EditForm } from '../EditForm/index.js'\nimport { FileSidebar } from '../FileSidebar/index.js'\nimport { useFormsManager } from '../FormsManager/index.js'\nimport { DrawerHeader } from '../Header/index.js'\nimport './index.scss'\n\nconst baseClass = 'bulk-upload--file-manager'\n\nexport function AddingFilesView() {\n  const {\n    activeIndex,\n    collectionSlug,\n    docPermissions,\n    documentSlots,\n    forms,\n    hasPublishPermission,\n    hasSavePermission,\n    hasSubmitted,\n    resetUploadEdits,\n    updateUploadEdits,\n  } = useFormsManager()\n  const activeForm = forms[activeIndex]\n  const { getEntityConfig } = useConfig()\n  const { i18n } = useTranslation()\n  const { user } = useAuth()\n  const { openModal } = useModal()\n\n  const collectionConfig = getEntityConfig({ collectionSlug })\n\n  return (\n    <div className={baseClass}>\n      <FileSidebar />\n\n      <div className={`${baseClass}__editView`}>\n        <DrawerHeader\n          onClose={() => openModal(discardBulkUploadModalSlug)}\n          title={getTranslation(collectionConfig.labels.singular, i18n)}\n        />\n        {activeForm ? (\n          <DocumentInfoProvider\n            collectionSlug={collectionSlug}\n            currentEditor={user}\n            docPermissions={docPermissions}\n            hasPublishedDoc={false}\n            hasPublishPermission={hasPublishPermission}\n            hasSavePermission={hasSavePermission}\n            id={null}\n            initialData={reduceFieldsToValues(activeForm.formState, true)}\n            initialState={activeForm.formState}\n            isLocked={false}\n            key={`${activeIndex}-${forms.length}`}\n            lastUpdateTime={0}\n            mostRecentVersionIsAutosaved={false}\n            unpublishedVersionCount={0}\n            Upload={documentSlots.Upload}\n            versionCount={0}\n          >\n            <ActionsBar collectionConfig={collectionConfig} />\n            <EditForm\n              resetUploadEdits={resetUploadEdits}\n              submitted={hasSubmitted}\n              updateUploadEdits={updateUploadEdits}\n              uploadEdits={activeForm?.uploadEdits}\n            />\n          </DocumentInfoProvider>\n        ) : null}\n      </div>\n\n      <DiscardWithoutSaving />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}