{"version":3,"file":"index.js","names":["c","_c","React","ChevronIcon","useConfig","useTranslation","Button","EditManyBulkUploads","useFormsManager","baseClass","ActionsBar","t0","$","collectionConfig","activeIndex","forms","setActiveIndex","t","t1","t2","length","t3","nextIndex","t4","nextIndex_0","_jsxs","className","children","_jsx","buttonStyle","onClick","type","direction","collection","Actions","getEntityConfig","collectionSlug","hasPublishPermission","hasSavePermission","saveAllDocs","filter","Boolean","join","versions","drafts","overrides","_status"],"sources":["../../../../src/elements/BulkUpload/ActionsBar/index.tsx"],"sourcesContent":["'use client'\n\nimport type { ClientCollectionConfig } from 'payload'\n\nimport React from 'react'\n\nimport { ChevronIcon } from '../../../icons/Chevron/index.js'\nimport { useConfig } from '../../../providers/Config/index.js'\nimport { useTranslation } from '../../../providers/Translation/index.js'\nimport { Button } from '../../Button/index.js'\nimport { EditManyBulkUploads } from '../EditMany/index.js'\nimport { useFormsManager } from '../FormsManager/index.js'\nimport './index.scss'\n\nconst baseClass = 'bulk-upload--actions-bar'\n\ntype Props = {\n  readonly collectionConfig: ClientCollectionConfig\n}\n\nexport function ActionsBar({ collectionConfig }: Props) {\n  const { activeIndex, forms, setActiveIndex } = useFormsManager()\n  const { t } = useTranslation()\n\n  return (\n    <div className={baseClass}>\n      <div className={`${baseClass}__navigation`}>\n        <p className={`${baseClass}__locationText`}>\n          <strong>{activeIndex + 1}</strong>\n          {` ${t('general:of')} `}\n          <strong>{forms.length}</strong>\n        </p>\n\n        <div className={`${baseClass}__controls`}>\n          <Button\n            aria-label={t('general:previous')}\n            buttonStyle=\"none\"\n            onClick={() => {\n              const nextIndex = activeIndex - 1\n              if (nextIndex < 0) {\n                setActiveIndex(forms.length - 1)\n              } else {\n                setActiveIndex(nextIndex)\n              }\n            }}\n            type=\"button\"\n          >\n            <ChevronIcon direction=\"left\" />\n          </Button>\n          <Button\n            aria-label={t('general:next')}\n            buttonStyle=\"none\"\n            onClick={() => {\n              const nextIndex = activeIndex + 1\n              if (nextIndex === forms.length) {\n                setActiveIndex(0)\n              } else {\n                setActiveIndex(nextIndex)\n              }\n            }}\n            type=\"button\"\n          >\n            <ChevronIcon direction=\"right\" />\n          </Button>\n        </div>\n        <EditManyBulkUploads collection={collectionConfig} />\n      </div>\n\n      <Actions className={`${baseClass}__saveButtons`} />\n    </div>\n  )\n}\n\ntype ActionsProps = {\n  readonly className?: string\n}\nexport function Actions({ className }: ActionsProps) {\n  const { getEntityConfig } = useConfig()\n  const { t } = useTranslation()\n  const { collectionSlug, hasPublishPermission, hasSavePermission, saveAllDocs } = useFormsManager()\n\n  const collectionConfig = getEntityConfig({ collectionSlug })\n\n  return (\n    <div className={[`${baseClass}__buttons`, className].filter(Boolean).join(' ')}>\n      {collectionConfig?.versions?.drafts && hasSavePermission ? (\n        <Button\n          buttonStyle=\"secondary\"\n          onClick={() => void saveAllDocs({ overrides: { _status: 'draft' } })}\n        >\n          {t('version:saveDraft')}\n        </Button>\n      ) : null}\n      {collectionConfig?.versions?.drafts && hasPublishPermission ? (\n        <Button onClick={() => void saveAllDocs({ overrides: { _status: 'published' } })}>\n          {t('version:publish')}\n        </Button>\n      ) : null}\n\n      {!collectionConfig?.versions?.drafts && hasSavePermission ? (\n        <Button onClick={() => void saveAllDocs()}>{t('general:save')}</Button>\n      ) : null}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}