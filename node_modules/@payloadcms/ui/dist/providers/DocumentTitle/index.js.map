{"version":3,"file":"index.js","names":["createContext","use","useEffect","useState","formatDocTitle","useConfig","useDocumentInfo","useTranslation","DocumentTitleContext","useDocumentTitle","DocumentTitleProvider","children","id","collectionSlug","data","docConfig","globalSlug","initialData","config","admin","dateFormat","i18n","title","setDocumentTitle","collectionConfig","undefined","fallback","toString","globalConfig","_jsx","value"],"sources":["../../../src/providers/DocumentTitle/index.tsx"],"sourcesContent":["import type { ClientCollectionConfig, ClientGlobalConfig } from 'payload'\n\nimport { createContext, use, useEffect, useState } from 'react'\n\nimport { formatDocTitle } from '../../utilities/formatDocTitle/index.js'\nimport { useConfig } from '../Config/index.js'\nimport { useDocumentInfo } from '../DocumentInfo/index.js'\nimport { useTranslation } from '../Translation/index.js'\n\ntype IDocumentTitleContext = {\n  setDocumentTitle: (title: string) => void\n  title: string\n}\n\nconst DocumentTitleContext = createContext({} as IDocumentTitleContext)\n\nexport const useDocumentTitle = (): IDocumentTitleContext => use(DocumentTitleContext)\n\nexport const DocumentTitleProvider: React.FC<{\n  children: React.ReactNode\n}> = ({ children }) => {\n  const { id, collectionSlug, data, docConfig, globalSlug, initialData } = useDocumentInfo()\n\n  const {\n    config: {\n      admin: { dateFormat },\n    },\n  } = useConfig()\n\n  const { i18n } = useTranslation()\n\n  const [title, setDocumentTitle] = useState(() =>\n    formatDocTitle({\n      collectionConfig: collectionSlug ? (docConfig as ClientCollectionConfig) : undefined,\n      data: { ...(initialData || {}), id },\n      dateFormat,\n      fallback: id?.toString(),\n      globalConfig: globalSlug ? (docConfig as ClientGlobalConfig) : undefined,\n      i18n,\n    }),\n  )\n\n  useEffect(() => {\n    setDocumentTitle(\n      formatDocTitle({\n        collectionConfig: collectionSlug ? (docConfig as ClientCollectionConfig) : undefined,\n        data: { ...data, id },\n        dateFormat,\n        fallback: id?.toString(),\n        globalConfig: globalSlug ? (docConfig as ClientGlobalConfig) : undefined,\n        i18n,\n      }),\n    )\n  }, [data, dateFormat, i18n, id, collectionSlug, docConfig, globalSlug])\n\n  return <DocumentTitleContext value={{ setDocumentTitle, title }}>{children}</DocumentTitleContext>\n}\n"],"mappings":";AAEA,SAASA,aAAa,EAAEC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ;AAExD,SAASC,cAAc,QAAQ;AAC/B,SAASC,SAAS,QAAQ;AAC1B,SAASC,eAAe,QAAQ;AAChC,SAASC,cAAc,QAAQ;AAO/B,MAAMC,oBAAA,gBAAuBR,aAAA,CAAc,CAAC;AAE5C,OAAO,MAAMS,gBAAA,GAAmBA,CAAA,KAA6BR,GAAA,CAAIO,oBAAA;AAEjE,OAAO,MAAME,qBAAA,GAERA,CAAC;EAAEC;AAAQ,CAAE;EAChB,MAAM;IAAEC,EAAE;IAAEC,cAAc;IAAEC,IAAI;IAAEC,SAAS;IAAEC,UAAU;IAAEC;EAAW,CAAE,GAAGX,eAAA;EAEzE,MAAM;IACJY,MAAA,EAAQ;MACNC,KAAA,EAAO;QAAEC;MAAU;IAAE;EACtB,CACF,GAAGf,SAAA;EAEJ,MAAM;IAAEgB;EAAI,CAAE,GAAGd,cAAA;EAEjB,MAAM,CAACe,KAAA,EAAOC,gBAAA,CAAiB,GAAGpB,QAAA,CAAS,MACzCC,cAAA,CAAe;IACboB,gBAAA,EAAkBX,cAAA,GAAkBE,SAAA,GAAuCU,SAAA;IAC3EX,IAAA,EAAM;MAAE,IAAIG,WAAA,IAAe,CAAC,CAAC;MAAGL;IAAG;IACnCQ,UAAA;IACAM,QAAA,EAAUd,EAAA,EAAIe,QAAA;IACdC,YAAA,EAAcZ,UAAA,GAAcD,SAAA,GAAmCU,SAAA;IAC/DJ;EACF;EAGFnB,SAAA,CAAU;IACRqB,gBAAA,CACEnB,cAAA,CAAe;MACboB,gBAAA,EAAkBX,cAAA,GAAkBE,SAAA,GAAuCU,SAAA;MAC3EX,IAAA,EAAM;QAAE,GAAGA,IAAI;QAAEF;MAAG;MACpBQ,UAAA;MACAM,QAAA,EAAUd,EAAA,EAAIe,QAAA;MACdC,YAAA,EAAcZ,UAAA,GAAcD,SAAA,GAAmCU,SAAA;MAC/DJ;IACF;EAEJ,GAAG,CAACP,IAAA,EAAMM,UAAA,EAAYC,IAAA,EAAMT,EAAA,EAAIC,cAAA,EAAgBE,SAAA,EAAWC,UAAA,CAAW;EAEtE,oBAAOa,IAAA,CAACrB,oBAAA;IAAqBsB,KAAA,EAAO;MAAEP,gBAAA;MAAkBD;IAAM;cAAIX;;AACpE","ignoreList":[]}