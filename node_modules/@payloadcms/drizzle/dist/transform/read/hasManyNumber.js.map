{"version":3,"sources":["../../../src/transform/read/hasManyNumber.ts"],"sourcesContent":["import type { NumberField } from 'payload'\n\ntype Args = {\n  field: NumberField\n  locale?: string\n  numberRows: Record<string, unknown>[]\n  ref: Record<string, unknown>\n  withinArrayOrBlockLocale?: string\n}\n\nexport const transformHasManyNumber = ({\n  field,\n  locale,\n  numberRows,\n  ref,\n  withinArrayOrBlockLocale,\n}: Args) => {\n  let result: unknown[]\n\n  if (withinArrayOrBlockLocale) {\n    result = numberRows.reduce((acc, { locale, number }) => {\n      if (locale === withinArrayOrBlockLocale) {\n        if (typeof number === 'string') {\n          number = Number(number)\n        }\n        acc.push(number)\n      }\n\n      return acc\n    }, [])\n  } else {\n    result = numberRows.map(({ number }) => {\n      if (typeof number === 'string') {\n        number = Number(number)\n      }\n      return number\n    })\n  }\n\n  if (locale) {\n    ref[field.name][locale] = result\n  } else {\n    ref[field.name] = result\n  }\n}\n"],"names":["transformHasManyNumber","field","locale","numberRows","ref","withinArrayOrBlockLocale","result","reduce","acc","number","Number","push","map","name"],"mappings":"AAUA,OAAO,MAAMA,yBAAyB,CAAC,EACrCC,KAAK,EACLC,MAAM,EACNC,UAAU,EACVC,GAAG,EACHC,wBAAwB,EACnB;IACL,IAAIC;IAEJ,IAAID,0BAA0B;QAC5BC,SAASH,WAAWI,MAAM,CAAC,CAACC,KAAK,EAAEN,MAAM,EAAEO,MAAM,EAAE;YACjD,IAAIP,WAAWG,0BAA0B;gBACvC,IAAI,OAAOI,WAAW,UAAU;oBAC9BA,SAASC,OAAOD;gBAClB;gBACAD,IAAIG,IAAI,CAACF;YACX;YAEA,OAAOD;QACT,GAAG,EAAE;IACP,OAAO;QACLF,SAASH,WAAWS,GAAG,CAAC,CAAC,EAAEH,MAAM,EAAE;YACjC,IAAI,OAAOA,WAAW,UAAU;gBAC9BA,SAASC,OAAOD;YAClB;YACA,OAAOA;QACT;IACF;IAEA,IAAIP,QAAQ;QACVE,GAAG,CAACH,MAAMY,IAAI,CAAC,CAACX,OAAO,GAAGI;IAC5B,OAAO;QACLF,GAAG,CAACH,MAAMY,IAAI,CAAC,GAAGP;IACpB;AACF,EAAC"}