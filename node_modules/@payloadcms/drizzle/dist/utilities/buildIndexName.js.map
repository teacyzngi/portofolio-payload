{"version":3,"sources":["../../src/utilities/buildIndexName.ts"],"sourcesContent":["import type { DrizzleAdapter } from '../types.js'\n\nexport const buildIndexName = ({\n  name,\n  adapter,\n  number = 0,\n}: {\n  adapter: DrizzleAdapter\n  name: string\n  number?: number\n}): string => {\n  let indexName = `${name}${number ? `_${number}` : ''}_idx`\n\n  if (indexName.length > 60) {\n    const suffix = `${number ? `_${number}` : ''}_idx`\n    indexName = `${name.slice(0, 60 - suffix.length)}${suffix}`\n  }\n\n  if (!adapter.indexes.has(indexName)) {\n    adapter.indexes.add(indexName)\n    return indexName\n  }\n\n  return buildIndexName({\n    name,\n    adapter,\n    number: number + 1,\n  })\n}\n"],"names":["buildIndexName","name","adapter","number","indexName","length","suffix","slice","indexes","has","add"],"mappings":"AAEA,OAAO,MAAMA,iBAAiB,CAAC,EAC7BC,IAAI,EACJC,OAAO,EACPC,SAAS,CAAC,EAKX;IACC,IAAIC,YAAY,GAAGH,OAAOE,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,GAAG,IAAI,CAAC;IAE1D,IAAIC,UAAUC,MAAM,GAAG,IAAI;QACzB,MAAMC,SAAS,GAAGH,SAAS,CAAC,CAAC,EAAEA,QAAQ,GAAG,GAAG,IAAI,CAAC;QAClDC,YAAY,GAAGH,KAAKM,KAAK,CAAC,GAAG,KAAKD,OAAOD,MAAM,IAAIC,QAAQ;IAC7D;IAEA,IAAI,CAACJ,QAAQM,OAAO,CAACC,GAAG,CAACL,YAAY;QACnCF,QAAQM,OAAO,CAACE,GAAG,CAACN;QACpB,OAAOA;IACT;IAEA,OAAOJ,eAAe;QACpBC;QACAC;QACAC,QAAQA,SAAS;IACnB;AACF,EAAC"}