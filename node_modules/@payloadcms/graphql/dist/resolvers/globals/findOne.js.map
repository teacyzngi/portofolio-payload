{"version":3,"sources":["../../../src/resolvers/globals/findOne.ts"],"sourcesContent":["import type { GraphQLResolveInfo } from 'graphql'\nimport type { Document, SanitizedGlobalConfig } from 'payload'\n\nimport { findOneOperation, isolateObjectProperty } from 'payload'\n\nimport type { Context } from '../types.js'\n\nimport { buildSelectForCollection } from '../../utilities/select.js'\n\nexport type Resolver = (\n  _: unknown,\n  args: {\n    draft?: boolean\n    fallbackLocale?: string\n    id: number | string\n    locale?: string\n    select?: boolean\n  },\n  context: Context,\n  info: GraphQLResolveInfo\n) => Promise<Document>\n\nexport function findOne(globalConfig: SanitizedGlobalConfig): Resolver {\n  return async function resolver(_, args, context, info) {\n    const req = context.req = isolateObjectProperty(context.req, ['locale', 'fallbackLocale', 'transactionID'])\n    const select = context.select = args.select ? buildSelectForCollection(info) : undefined\n    const { slug } = globalConfig\n\n    req.locale = args.locale || req.locale\n    req.fallbackLocale = args.fallbackLocale || req.fallbackLocale\n    req.query = req.query || {}\n\n    const options = {\n      slug,\n      depth: 0,\n      draft: args.draft,\n      globalConfig,\n      req,\n      select,\n    }\n\n    const result = await findOneOperation(options)\n    return result\n  }\n}\n"],"names":["findOneOperation","isolateObjectProperty","buildSelectForCollection","findOne","globalConfig","resolver","_","args","context","info","req","select","undefined","slug","locale","fallbackLocale","query","options","depth","draft","result"],"mappings":"AAGA,SAASA,gBAAgB,EAAEC,qBAAqB,QAAQ,UAAS;AAIjE,SAASC,wBAAwB,QAAQ,4BAA2B;AAepE,OAAO,SAASC,QAAQC,YAAmC;IACzD,OAAO,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAO,EAAEC,IAAI;QACnD,MAAMC,MAAMF,QAAQE,GAAG,GAAGT,sBAAsBO,QAAQE,GAAG,EAAE;YAAC;YAAU;YAAkB;SAAgB;QAC1G,MAAMC,SAASH,QAAQG,MAAM,GAAGJ,KAAKI,MAAM,GAAGT,yBAAyBO,QAAQG;QAC/E,MAAM,EAAEC,IAAI,EAAE,GAAGT;QAEjBM,IAAII,MAAM,GAAGP,KAAKO,MAAM,IAAIJ,IAAII,MAAM;QACtCJ,IAAIK,cAAc,GAAGR,KAAKQ,cAAc,IAAIL,IAAIK,cAAc;QAC9DL,IAAIM,KAAK,GAAGN,IAAIM,KAAK,IAAI,CAAC;QAE1B,MAAMC,UAAU;YACdJ;YACAK,OAAO;YACPC,OAAOZ,KAAKY,KAAK;YACjBf;YACAM;YACAC;QACF;QAEA,MAAMS,SAAS,MAAMpB,iBAAiBiB;QACtC,OAAOG;IACT;AACF"}