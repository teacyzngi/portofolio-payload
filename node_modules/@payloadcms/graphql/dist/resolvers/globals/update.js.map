{"version":3,"sources":["../../../src/resolvers/globals/update.ts"],"sourcesContent":["import type {\n  DataFromGlobalSlug,\n  GlobalSlug,\n  PayloadRequest,\n  SanitizedGlobalConfig,\n  SelectType,\n} from 'payload'\nimport type { DeepPartial } from 'ts-essentials'\n\nimport { isolateObjectProperty, updateOperationGlobal } from 'payload'\n\nimport type { Context } from '../types.js'\n\ntype Resolver<TSlug extends GlobalSlug> = (\n  _: unknown,\n  args: {\n    data?: DeepPartial<Omit<DataFromGlobalSlug<TSlug>, 'id'>>\n    draft?: boolean\n    fallbackLocale?: string\n    locale?: string\n  },\n  context: {\n    req: PayloadRequest\n  },\n) => Promise<DataFromGlobalSlug<TSlug>>\n\nexport function update<TSlug extends GlobalSlug>(\n  globalConfig: SanitizedGlobalConfig,\n): Resolver<TSlug> {\n  return async function resolver(_, args, context: Context) {\n    if (args.locale) {\n      context.req.locale = args.locale\n    }\n    if (args.fallbackLocale) {\n      context.req.fallbackLocale = args.fallbackLocale\n    }\n\n    const { slug } = globalConfig\n\n    const options = {\n      slug,\n      data: args.data,\n      depth: 0,\n      draft: args.draft,\n      globalConfig,\n      req: isolateObjectProperty(context.req, 'transactionID'),\n    }\n\n    const result = await updateOperationGlobal<TSlug, SelectType>(options)\n    return result\n  }\n}\n"],"names":["isolateObjectProperty","updateOperationGlobal","update","globalConfig","resolver","_","args","context","locale","req","fallbackLocale","slug","options","data","depth","draft","result"],"mappings":"AASA,SAASA,qBAAqB,EAAEC,qBAAqB,QAAQ,UAAS;AAiBtE,OAAO,SAASC,OACdC,YAAmC;IAEnC,OAAO,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAgB;QACtD,IAAID,KAAKE,MAAM,EAAE;YACfD,QAAQE,GAAG,CAACD,MAAM,GAAGF,KAAKE,MAAM;QAClC;QACA,IAAIF,KAAKI,cAAc,EAAE;YACvBH,QAAQE,GAAG,CAACC,cAAc,GAAGJ,KAAKI,cAAc;QAClD;QAEA,MAAM,EAAEC,IAAI,EAAE,GAAGR;QAEjB,MAAMS,UAAU;YACdD;YACAE,MAAMP,KAAKO,IAAI;YACfC,OAAO;YACPC,OAAOT,KAAKS,KAAK;YACjBZ;YACAM,KAAKT,sBAAsBO,QAAQE,GAAG,EAAE;QAC1C;QAEA,MAAMO,SAAS,MAAMf,sBAAyCW;QAC9D,OAAOI;IACT;AACF"}