{"version":3,"sources":["../../../src/resolvers/auth/verifyEmail.ts"],"sourcesContent":["import type { Collection } from 'payload'\n\nimport { isolateObjectProperty, verifyEmailOperation } from 'payload'\n\nimport type { Context } from '../types.js'\n\nexport function verifyEmail(collection: Collection) {\n  async function resolver(_, args, context: Context) {\n    if (args.locale) {\n      context.req.locale = args.locale\n    }\n    if (args.fallbackLocale) {\n      context.req.fallbackLocale = args.fallbackLocale\n    }\n\n    const options = {\n      api: 'GraphQL',\n      collection,\n      req: isolateObjectProperty(context.req, 'transactionID'),\n      token: args.token,\n    }\n\n    const success = await verifyEmailOperation(options)\n    return success\n  }\n\n  return resolver\n}\n"],"names":["isolateObjectProperty","verifyEmailOperation","verifyEmail","collection","resolver","_","args","context","locale","req","fallbackLocale","options","api","token","success"],"mappings":"AAEA,SAASA,qBAAqB,EAAEC,oBAAoB,QAAQ,UAAS;AAIrE,OAAO,SAASC,YAAYC,UAAsB;IAChD,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAgB;QAC/C,IAAID,KAAKE,MAAM,EAAE;YACfD,QAAQE,GAAG,CAACD,MAAM,GAAGF,KAAKE,MAAM;QAClC;QACA,IAAIF,KAAKI,cAAc,EAAE;YACvBH,QAAQE,GAAG,CAACC,cAAc,GAAGJ,KAAKI,cAAc;QAClD;QAEA,MAAMC,UAAU;YACdC,KAAK;YACLT;YACAM,KAAKT,sBAAsBO,QAAQE,GAAG,EAAE;YACxCI,OAAOP,KAAKO,KAAK;QACnB;QAEA,MAAMC,UAAU,MAAMb,qBAAqBU;QAC3C,OAAOG;IACT;IAEA,OAAOV;AACT"}