{"version":3,"sources":["../../../src/resolvers/auth/me.ts"],"sourcesContent":["import type { Collection } from 'payload'\n\nimport { extractJWT, isolateObjectProperty, meOperation } from 'payload'\n\nimport type { Context } from '../types.js'\n\nexport function me(collection: Collection): any {\n  async function resolver(_, args, context: Context) {\n    const currentToken = extractJWT(context.req)\n\n    const options = {\n      collection,\n      currentToken,\n      depth: 0,\n      req: isolateObjectProperty(context.req, 'transactionID'),\n    }\n\n    const result = await meOperation(options)\n\n    if (collection.config.auth.removeTokenFromResponses) {\n      delete result.token\n    }\n\n    return result\n  }\n\n  return resolver\n}\n"],"names":["extractJWT","isolateObjectProperty","meOperation","me","collection","resolver","_","args","context","currentToken","req","options","depth","result","config","auth","removeTokenFromResponses","token"],"mappings":"AAEA,SAASA,UAAU,EAAEC,qBAAqB,EAAEC,WAAW,QAAQ,UAAS;AAIxE,OAAO,SAASC,GAAGC,UAAsB;IACvC,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAgB;QAC/C,MAAMC,eAAeT,WAAWQ,QAAQE,GAAG;QAE3C,MAAMC,UAAU;YACdP;YACAK;YACAG,OAAO;YACPF,KAAKT,sBAAsBO,QAAQE,GAAG,EAAE;QAC1C;QAEA,MAAMG,SAAS,MAAMX,YAAYS;QAEjC,IAAIP,WAAWU,MAAM,CAACC,IAAI,CAACC,wBAAwB,EAAE;YACnD,OAAOH,OAAOI,KAAK;QACrB;QAEA,OAAOJ;IACT;IAEA,OAAOR;AACT"}