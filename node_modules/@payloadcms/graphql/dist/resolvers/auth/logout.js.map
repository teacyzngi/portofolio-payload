{"version":3,"sources":["../../../src/resolvers/auth/logout.ts"],"sourcesContent":["import type { Collection } from 'payload'\n\nimport { generateExpiredPayloadCookie, isolateObjectProperty, logoutOperation } from 'payload'\n\nimport type { Context } from '../types.js'\n\nexport function logout(collection: Collection): any {\n  async function resolver(_, args, context: Context) {\n    const options = {\n      allSessions: args.allSessions,\n      collection,\n      req: isolateObjectProperty(context.req, 'transactionID'),\n    }\n\n    const result = await logoutOperation(options)\n    const expiredCookie = generateExpiredPayloadCookie({\n      collectionAuthConfig: collection.config.auth,\n      config: context.req.payload.config,\n      cookiePrefix: context.req.payload.config.cookiePrefix,\n    })\n    context.headers['Set-Cookie'] = expiredCookie\n    return result\n  }\n\n  return resolver\n}\n"],"names":["generateExpiredPayloadCookie","isolateObjectProperty","logoutOperation","logout","collection","resolver","_","args","context","options","allSessions","req","result","expiredCookie","collectionAuthConfig","config","auth","payload","cookiePrefix","headers"],"mappings":"AAEA,SAASA,4BAA4B,EAAEC,qBAAqB,EAAEC,eAAe,QAAQ,UAAS;AAI9F,OAAO,SAASC,OAAOC,UAAsB;IAC3C,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAgB;QAC/C,MAAMC,UAAU;YACdC,aAAaH,KAAKG,WAAW;YAC7BN;YACAO,KAAKV,sBAAsBO,QAAQG,GAAG,EAAE;QAC1C;QAEA,MAAMC,SAAS,MAAMV,gBAAgBO;QACrC,MAAMI,gBAAgBb,6BAA6B;YACjDc,sBAAsBV,WAAWW,MAAM,CAACC,IAAI;YAC5CD,QAAQP,QAAQG,GAAG,CAACM,OAAO,CAACF,MAAM;YAClCG,cAAcV,QAAQG,GAAG,CAACM,OAAO,CAACF,MAAM,CAACG,YAAY;QACvD;QACAV,QAAQW,OAAO,CAAC,aAAa,GAAGN;QAChC,OAAOD;IACT;IAEA,OAAOP;AACT"}