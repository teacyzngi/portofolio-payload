{"version":3,"sources":["../../../src/resolvers/collections/duplicate.ts"],"sourcesContent":["import type { Collection, CollectionSlug, DataFromCollectionSlug, PayloadRequest } from 'payload'\n\nimport { duplicateOperation, isolateObjectProperty } from 'payload'\n\nimport type { Context } from '../types.js'\n\nexport type Resolver<TData> = (\n  _: unknown,\n  args: {\n    data: TData\n    draft: boolean\n    fallbackLocale?: string\n    id: string\n    locale?: string\n  },\n  context: {\n    req: PayloadRequest\n  },\n) => Promise<TData>\n\nexport function duplicateResolver<TSlug extends CollectionSlug>(\n  collection: Collection,\n): Resolver<DataFromCollectionSlug<TSlug>> {\n  return async function resolver(_, args, context: Context) {\n    const { req } = context\n    const locale = req.locale\n    const fallbackLocale = req.fallbackLocale\n    req.locale = args.locale || locale\n    req.fallbackLocale = args.fallbackLocale || fallbackLocale\n    context.req = req\n\n    const result = await duplicateOperation({\n      id: args.id,\n      collection,\n      data: args.data,\n      depth: 0,\n      draft: args.draft,\n      req: isolateObjectProperty(req, 'transactionID'),\n    })\n\n    return result\n  }\n}\n"],"names":["duplicateOperation","isolateObjectProperty","duplicateResolver","collection","resolver","_","args","context","req","locale","fallbackLocale","result","id","data","depth","draft"],"mappings":"AAEA,SAASA,kBAAkB,EAAEC,qBAAqB,QAAQ,UAAS;AAkBnE,OAAO,SAASC,kBACdC,UAAsB;IAEtB,OAAO,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAgB;QACtD,MAAM,EAAEC,GAAG,EAAE,GAAGD;QAChB,MAAME,SAASD,IAAIC,MAAM;QACzB,MAAMC,iBAAiBF,IAAIE,cAAc;QACzCF,IAAIC,MAAM,GAAGH,KAAKG,MAAM,IAAIA;QAC5BD,IAAIE,cAAc,GAAGJ,KAAKI,cAAc,IAAIA;QAC5CH,QAAQC,GAAG,GAAGA;QAEd,MAAMG,SAAS,MAAMX,mBAAmB;YACtCY,IAAIN,KAAKM,EAAE;YACXT;YACAU,MAAMP,KAAKO,IAAI;YACfC,OAAO;YACPC,OAAOT,KAAKS,KAAK;YACjBP,KAAKP,sBAAsBO,KAAK;QAClC;QAEA,OAAOG;IACT;AACF"}