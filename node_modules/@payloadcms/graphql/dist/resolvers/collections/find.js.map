{"version":3,"sources":["../../../src/resolvers/collections/find.ts"],"sourcesContent":["import type { GraphQLResolveInfo } from 'graphql'\nimport type { Collection, PaginatedDocs, Where } from 'payload'\n\nimport { findOperation, isolateObjectProperty } from 'payload'\n\nimport type { Context } from '../types.js'\n\nimport { buildSelectForCollectionMany } from '../../utilities/select.js'\n\nexport type Resolver = (\n  _: unknown,\n  args: {\n    data: Record<string, unknown>\n    draft: boolean\n    fallbackLocale?: string\n    limit?: number\n    locale?: string\n    page?: number\n    pagination?: boolean\n    select?: boolean\n    sort?: string\n    trash?: boolean\n    where?: Where\n  },\n  context: Context,\n  info: GraphQLResolveInfo,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) => Promise<PaginatedDocs<any>>\n\nexport function findResolver(collection: Collection): Resolver {\n  return async function resolver(_, args, context, info) {\n    const req = context.req = isolateObjectProperty(context.req, ['locale', 'fallbackLocale', 'transactionID'])\n    const select = context.select = args.select ? buildSelectForCollectionMany(info) : undefined\n\n    req.locale = args.locale || req.locale\n    req.fallbackLocale = args.fallbackLocale || req.fallbackLocale\n    req.query = req.query || {}\n\n    const draft: boolean =\n      (args.draft ?? req.query?.draft === 'false')\n        ? false\n        : req.query?.draft === 'true'\n          ? true\n          : undefined\n    if (typeof draft === 'boolean') {\n      req.query.draft = String(draft)\n    }\n\n    const options = {\n      collection,\n      depth: 0,\n      draft: args.draft,\n      limit: args.limit,\n      page: args.page,\n      pagination: args.pagination,\n      req,\n      select,\n      sort: args.sort,\n      trash: args.trash,\n      where: args.where,\n    }\n\n    const result = await findOperation(options)\n    return result\n  }\n}\n"],"names":["findOperation","isolateObjectProperty","buildSelectForCollectionMany","findResolver","collection","resolver","_","args","context","info","req","select","undefined","locale","fallbackLocale","query","draft","String","options","depth","limit","page","pagination","sort","trash","where","result"],"mappings":"AAGA,SAASA,aAAa,EAAEC,qBAAqB,QAAQ,UAAS;AAI9D,SAASC,4BAA4B,QAAQ,4BAA2B;AAsBxE,OAAO,SAASC,aAAaC,UAAsB;IACjD,OAAO,eAAeC,SAASC,CAAC,EAAEC,IAAI,EAAEC,OAAO,EAAEC,IAAI;QACnD,MAAMC,MAAMF,QAAQE,GAAG,GAAGT,sBAAsBO,QAAQE,GAAG,EAAE;YAAC;YAAU;YAAkB;SAAgB;QAC1G,MAAMC,SAASH,QAAQG,MAAM,GAAGJ,KAAKI,MAAM,GAAGT,6BAA6BO,QAAQG;QAEnFF,IAAIG,MAAM,GAAGN,KAAKM,MAAM,IAAIH,IAAIG,MAAM;QACtCH,IAAII,cAAc,GAAGP,KAAKO,cAAc,IAAIJ,IAAII,cAAc;QAC9DJ,IAAIK,KAAK,GAAGL,IAAIK,KAAK,IAAI,CAAC;QAE1B,MAAMC,QACJ,AAACT,KAAKS,KAAK,IAAIN,IAAIK,KAAK,EAAEC,UAAU,UAChC,QACAN,IAAIK,KAAK,EAAEC,UAAU,SACnB,OACAJ;QACR,IAAI,OAAOI,UAAU,WAAW;YAC9BN,IAAIK,KAAK,CAACC,KAAK,GAAGC,OAAOD;QAC3B;QAEA,MAAME,UAAU;YACdd;YACAe,OAAO;YACPH,OAAOT,KAAKS,KAAK;YACjBI,OAAOb,KAAKa,KAAK;YACjBC,MAAMd,KAAKc,IAAI;YACfC,YAAYf,KAAKe,UAAU;YAC3BZ;YACAC;YACAY,MAAMhB,KAAKgB,IAAI;YACfC,OAAOjB,KAAKiB,KAAK;YACjBC,OAAOlB,KAAKkB,KAAK;QACnB;QAEA,MAAMC,SAAS,MAAM1B,cAAckB;QACnC,OAAOQ;IACT;AACF"}