{"version":3,"sources":["../../src/schema/buildObjectType.ts"],"sourcesContent":["import type { GraphQLFieldConfig } from 'graphql'\nimport type { Field, GraphQLInfo, SanitizedConfig } from 'payload'\n\nimport { GraphQLObjectType } from 'graphql'\n\nimport { fieldToSchemaMap } from './fieldToSchemaMap.js'\n\nexport type ObjectTypeConfig = {\n  [path: string]: GraphQLFieldConfig<any, any, any>\n}\n\ntype Args = {\n  baseFields?: ObjectTypeConfig\n  collectionSlug?: string\n  config: SanitizedConfig\n  fields: Field[]\n  forceNullable?: boolean\n  graphqlResult: GraphQLInfo\n  name: string\n  parentIsLocalized?: boolean\n  parentName: string\n}\n\nexport function buildObjectType({\n  name,\n  baseFields = {},\n  collectionSlug,\n  config,\n  fields,\n  forceNullable,\n  graphqlResult,\n  parentIsLocalized,\n  parentName,\n}: Args): GraphQLObjectType {\n  const objectSchema = {\n    name,\n    fields: () =>\n      fields.reduce((objectTypeConfig, field) => {\n        const fieldSchema = fieldToSchemaMap[field.type]\n\n        if (typeof fieldSchema !== 'function') {\n          return objectTypeConfig\n        }\n\n        return {\n          ...objectTypeConfig,\n          ...fieldSchema({\n            collectionSlug,\n            config,\n            field,\n            forceNullable,\n            graphqlResult,\n            newlyCreatedBlockType,\n            objectTypeConfig,\n            parentIsLocalized,\n            parentName,\n          }),\n        }\n      }, baseFields),\n  }\n\n  const newlyCreatedBlockType = new GraphQLObjectType(objectSchema)\n\n  return newlyCreatedBlockType\n}\n"],"names":["GraphQLObjectType","fieldToSchemaMap","buildObjectType","name","baseFields","collectionSlug","config","fields","forceNullable","graphqlResult","parentIsLocalized","parentName","objectSchema","reduce","objectTypeConfig","field","fieldSchema","type","newlyCreatedBlockType"],"mappings":"AAGA,SAASA,iBAAiB,QAAQ,UAAS;AAE3C,SAASC,gBAAgB,QAAQ,wBAAuB;AAkBxD,OAAO,SAASC,gBAAgB,EAC9BC,IAAI,EACJC,aAAa,CAAC,CAAC,EACfC,cAAc,EACdC,MAAM,EACNC,MAAM,EACNC,aAAa,EACbC,aAAa,EACbC,iBAAiB,EACjBC,UAAU,EACL;IACL,MAAMC,eAAe;QACnBT;QACAI,QAAQ,IACNA,OAAOM,MAAM,CAAC,CAACC,kBAAkBC;gBAC/B,MAAMC,cAAcf,gBAAgB,CAACc,MAAME,IAAI,CAAC;gBAEhD,IAAI,OAAOD,gBAAgB,YAAY;oBACrC,OAAOF;gBACT;gBAEA,OAAO;oBACL,GAAGA,gBAAgB;oBACnB,GAAGE,YAAY;wBACbX;wBACAC;wBACAS;wBACAP;wBACAC;wBACAS;wBACAJ;wBACAJ;wBACAC;oBACF,EAAE;gBACJ;YACF,GAAGP;IACP;IAEA,MAAMc,wBAAwB,IAAIlB,kBAAkBY;IAEpD,OAAOM;AACT"}