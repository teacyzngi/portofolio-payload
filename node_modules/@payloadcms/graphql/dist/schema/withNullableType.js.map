{"version":3,"sources":["../../src/schema/withNullableType.ts"],"sourcesContent":["import type { GraphQLType } from 'graphql'\nimport type { FieldAffectingData } from 'payload'\n\nimport { GraphQLNonNull } from 'graphql'\n\nexport const withNullableType = ({\n  type,\n  field,\n  forceNullable,\n  parentIsLocalized,\n}: {\n  field: FieldAffectingData\n  forceNullable?: boolean\n  parentIsLocalized: boolean\n  type: GraphQLType\n}): GraphQLType => {\n  const hasReadAccessControl = field.access && field.access.read\n  const condition = field.admin && field.admin.condition\n  const isTimestamp = field.name === 'createdAt' || field.name === 'updatedAt'\n\n  if (\n    !forceNullable &&\n    'required' in field &&\n    field.required &&\n    (!field.localized || parentIsLocalized) &&\n    !condition &&\n    !hasReadAccessControl &&\n    !isTimestamp\n  ) {\n    return new GraphQLNonNull(type)\n  }\n\n  return type\n}\n"],"names":["GraphQLNonNull","withNullableType","type","field","forceNullable","parentIsLocalized","hasReadAccessControl","access","read","condition","admin","isTimestamp","name","required","localized"],"mappings":"AAGA,SAASA,cAAc,QAAQ,UAAS;AAExC,OAAO,MAAMC,mBAAmB,CAAC,EAC/BC,IAAI,EACJC,KAAK,EACLC,aAAa,EACbC,iBAAiB,EAMlB;IACC,MAAMC,uBAAuBH,MAAMI,MAAM,IAAIJ,MAAMI,MAAM,CAACC,IAAI;IAC9D,MAAMC,YAAYN,MAAMO,KAAK,IAAIP,MAAMO,KAAK,CAACD,SAAS;IACtD,MAAME,cAAcR,MAAMS,IAAI,KAAK,eAAeT,MAAMS,IAAI,KAAK;IAEjE,IACE,CAACR,iBACD,cAAcD,SACdA,MAAMU,QAAQ,IACb,CAAA,CAACV,MAAMW,SAAS,IAAIT,iBAAgB,KACrC,CAACI,aACD,CAACH,wBACD,CAACK,aACD;QACA,OAAO,IAAIX,eAAeE;IAC5B;IAEA,OAAOA;AACT,EAAC"}